import{j as e,B as C,e as D,G as f,K as m,V as r,O as x}from"./mui-DyWukRpy.js";import{k as w,u as N,c as v}from"./vendor-zvfEP8kw.js";import{u as B}from"./useQuery-FIUzu5rJ.js";import{u as W}from"./useMutation-C26RIRiP.js";import{d as g}from"./departmentService-C1L4ZFUz.js";import"./index-CjnpFxxd.js";import"./utils-IvyUKLVR.js";const K=()=>{const{id:i}=w(),s=!!i,h=N(),{data:y}=B({queryKey:["department",i],queryFn:async()=>g.getById(Number(i)),enabled:s}),a=y||void 0,[t,c]=v.useState({name:"",description:"",location:"",budget:void 0,companyId:void 0,managerId:void 0,parentDepartmentId:void 0});v.useEffect(()=>{a&&c({name:a.name,description:a.description||"",location:a.location||"",budget:a.budget,companyId:a.companyId,managerId:a.managerId??void 0,parentDepartmentId:a.parentDepartmentId??void 0})},[a]);const{mutateAsync:b,isPending:I}=W({mutationFn:async()=>{const n=t;if(!n.name||!n.companyId)throw new Error("Name and Company ID are required");return s?g.update(Number(i),n):g.create(n)}}),u=n=>l=>{const o=l.target.value;c(p=>({...p,[n]:o===""?"":o}))},d=n=>l=>{const o=l.target.value;c(p=>({...p,[n]:o===""?void 0:Number(o)}))},j=async()=>{try{await b(),h("/departments")}catch(n){console.error(n)}};return e.jsxs(C,{children:[e.jsx(D,{variant:"h4",component:"h1",gutterBottom:!0,children:s?"Edit Department":"New Department"}),e.jsx(f,{sx:{p:3,mt:2},children:e.jsxs(m,{spacing:2,children:[e.jsxs(m,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(r,{label:"Name",value:t.name||"",onChange:u("name"),fullWidth:!0,required:!0}),e.jsx(r,{label:"Company ID",type:"number",value:t.companyId??"",onChange:d("companyId"),sx:{minWidth:200},required:!0}),e.jsx(r,{label:"Manager ID",type:"number",value:t.managerId??"",onChange:d("managerId"),sx:{minWidth:200}})]}),e.jsxs(m,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(r,{label:"Parent Department ID",type:"number",value:t.parentDepartmentId??"",onChange:d("parentDepartmentId"),sx:{minWidth:200}}),e.jsx(r,{label:"Location",value:t.location||"",onChange:u("location"),sx:{minWidth:200}}),e.jsx(r,{label:"Budget",type:"number",value:t.budget??"",onChange:d("budget"),sx:{minWidth:200}})]}),e.jsx(r,{label:"Description",value:t.description||"",onChange:u("description"),multiline:!0,minRows:3}),e.jsxs(m,{direction:"row",spacing:2,children:[e.jsx(x,{variant:"outlined",onClick:()=>h("/departments"),children:"Cancel"}),e.jsx(x,{variant:"contained",onClick:j,disabled:I,children:s?"Save":"Create"})]})]})})]})};export{K as default};
//# sourceMappingURL=DepartmentForm-DARlhVDF.js.map

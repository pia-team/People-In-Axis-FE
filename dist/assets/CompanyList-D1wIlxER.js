import{j as e,B as c,e as l,G as y,K as j,V as v,O as n}from"./mui-DyWukRpy.js";import{u as C,c as r}from"./vendor-zvfEP8kw.js";import{u as N}from"./useQuery-FIUzu5rJ.js";import{c as z}from"./companyService-B7KFBSs7.js";import{D as k}from"./DataGrid-CLJ1UgxA.js";import{k as M}from"./index-CjnpFxxd.js";import"./utils-IvyUKLVR.js";const G=()=>{const s=C(),[o,m]=r.useState(""),[i,h]=r.useState({page:0,pageSize:10}),{data:p,isLoading:g,isError:u,refetch:d}=N({queryKey:["companies",i.page,i.pageSize,o],queryFn:async()=>z.getAll({page:i.page,size:i.pageSize,search:o||void 0}),placeholderData:M}),t=p,x=(t==null?void 0:t.content)??[],f=(t==null?void 0:t.totalElements)??0,S=r.useMemo(()=>[{field:"code",headerName:"Code",width:140},{field:"name",headerName:"Name",flex:1.2,minWidth:180},{field:"taxNumber",headerName:"Tax No",width:140},{field:"email",headerName:"Email",flex:1,minWidth:200},{field:"phone",headerName:"Phone",width:140},{field:"city",headerName:"City",width:120},{field:"country",headerName:"Country",width:140}],[]),w=a=>{h({page:a.page,pageSize:a.pageSize})};return e.jsxs(c,{children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:"Companies"}),e.jsxs(y,{sx:{p:2,mt:2},children:[e.jsxs(j,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:[e.jsx(v,{size:"small",label:"Search",value:o,onChange:a=>m(a.target.value)}),e.jsx(n,{variant:"contained",onClick:()=>d(),children:"Search"}),e.jsx(c,{flexGrow:1}),e.jsx(n,{variant:"outlined",onClick:()=>d(),children:"Refresh"}),e.jsx(n,{variant:"contained",onClick:()=>s("/companies/new"),children:"New"})]}),e.jsx("div",{style:{height:600,width:"100%"},children:e.jsx(k,{rows:x,columns:S,getRowId:a=>a.id,loading:g,paginationMode:"server",rowCount:f,pageSizeOptions:[5,10,25,50],paginationModel:{page:i.page,pageSize:i.pageSize},onPaginationModelChange:w,onRowClick:a=>s(`/companies/${a.id}`),disableRowSelectionOnClick:!0})}),u&&e.jsx(l,{variant:"body2",color:"error",sx:{mt:2},children:"Failed to load companies."})]})]})};export{G as default};
//# sourceMappingURL=CompanyList-D1wIlxER.js.map

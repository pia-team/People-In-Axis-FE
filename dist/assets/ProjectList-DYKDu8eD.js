import{j as e,O as d,a8 as p,V as c,g as N}from"./mui-CYe98n_K.js";import{u as z,c as o}from"./vendor-XBP3t-ED.js";import{b,k}from"./index--2Lk4t6e.js";import{p as P}from"./projectService-B6tEN2uH.js";import{P as D}from"./PageContainer-BfQWlLPL.js";import{S as m}from"./SectionCard-4aLOeFJ3.js";import{E as M,s as R}from"./dataGridStyles-CXweFaFc.js";import{D as I}from"./DataGrid-BXsRbnco.js";import"./utils-BgeKWveL.js";const B=()=>{const l=z(),[r,h]=o.useState(""),[s,g]=o.useState(""),[t,u]=o.useState({page:0,pageSize:10}),{data:x,isLoading:j,isError:S,refetch:n}=b({queryKey:["projects",t.page,t.pageSize,r,s],queryFn:async()=>P.getAll({page:t.page,size:t.pageSize,search:r||void 0,companyId:s===""?void 0:Number(s)}),placeholderData:k}),i=x,f=(i==null?void 0:i.content)??[],y=(i==null?void 0:i.totalElements)??0,v=o.useMemo(()=>[{field:"code",headerName:"Code",width:140},{field:"name",headerName:"Name",flex:1.2,minWidth:180},{field:"companyName",headerName:"Company",flex:1,minWidth:160},{field:"projectManagerName",headerName:"Manager",flex:1,minWidth:160},{field:"status",headerName:"Status",width:140},{field:"startDate",headerName:"Start",width:120},{field:"deadline",headerName:"Deadline",width:120}],[]),C=a=>{u({page:a.page,pageSize:a.pageSize})},w=o.useCallback(()=>e.jsx(M,{title:"No projects",description:"There are no projects to display."}),[n]);return e.jsx(D,{title:"Projects",actions:e.jsxs(d,{direction:"row",spacing:1,children:[e.jsx(c,{variant:"outlined",onClick:()=>n(),children:"Refresh"}),e.jsx(c,{variant:"contained",onClick:()=>l("/projects/new"),children:"New"})]}),children:e.jsxs(d,{spacing:2,children:[e.jsx(m,{children:e.jsxs(d,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:{xs:"stretch",sm:"center"},children:[e.jsx(p,{size:"small",label:"Search",value:r,onChange:a=>h(a.target.value)}),e.jsx(p,{size:"small",label:"Company ID",type:"number",value:s,onChange:a=>g(a.target.value===""?"":Number(a.target.value)),sx:{width:{xs:"100%",sm:160}}}),e.jsx(c,{variant:"contained",onClick:()=>n(),children:"Search"})]})}),e.jsxs(m,{children:[e.jsx("div",{style:{height:600,width:"100%"},children:e.jsx(I,{rows:f,columns:v,getRowId:a=>a.id,loading:j,paginationMode:"server",rowCount:y,pageSizeOptions:[5,10,25,50],paginationModel:{page:t.page,pageSize:t.pageSize},onPaginationModelChange:C,onRowClick:a=>l(`/projects/${a.id}`),disableRowSelectionOnClick:!0,sx:R,slots:{noRowsOverlay:w}})}),S&&e.jsx(N,{variant:"body2",color:"error",sx:{mt:2},children:"Failed to load projects."})]})]})})};export{B as default};
//# sourceMappingURL=ProjectList-DYKDu8eD.js.map

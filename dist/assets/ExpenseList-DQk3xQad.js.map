{"version":3,"file":"ExpenseList-DQk3xQad.js","sources":["../../src/pages/expenses/ExpenseList.tsx"],"sourcesContent":["import React from 'react';\nimport { Box, Button, Stack, Typography } from '@mui/material';\nimport { DataGrid, GridColDef, GridPaginationModel } from '@mui/x-data-grid';\nimport { useQuery, keepPreviousData } from '@tanstack/react-query';\nimport { useNavigate } from 'react-router-dom';\nimport { expenseService } from '@/services/expenseService';\nimport { Expense, PaginatedResponse } from '@/types';\nimport PageContainer from '@/components/ui/PageContainer';\nimport SectionCard from '@/components/ui/SectionCard';\nimport { standardDataGridSx } from '@/components/ui/dataGridStyles';\nimport EmptyState from '@/components/ui/EmptyState';\n\nconst ExpenseList: React.FC = () => {\n  const navigate = useNavigate();\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\n  const [paginationModel, setPaginationModel] = React.useState<{ page: number; pageSize: number }>(\n    { page: 0, pageSize: 10 }\n  );\n\n  const { data, isLoading, isError, refetch } = useQuery({\n    queryKey: ['expenses', paginationModel.page, paginationModel.pageSize],\n    queryFn: async () => expenseService.getAll({ page: paginationModel.page, size: paginationModel.pageSize }),\n    placeholderData: keepPreviousData,\n  });\n\n  const page = data as PaginatedResponse<Expense> | undefined;\n  const rows: Expense[] = page?.content ?? [];\n  const rowCount = page?.totalElements ?? 0;\n\n  const columns = React.useMemo<GridColDef<Expense>[]>(\n    () => [\n      { field: 'employeeName', headerName: 'Employee', flex: 1.2, minWidth: 160 },\n      { field: 'expenseTypeName', headerName: 'Type', flex: 1, minWidth: 140 },\n      { field: 'projectName', headerName: 'Project', flex: 1.2, minWidth: 160 },\n      { field: 'expenseDate', headerName: 'Date', width: 120 },\n      { field: 'amount', headerName: 'Amount', width: 120 },\n      { field: 'currency', headerName: 'Currency', width: 100 },\n      { field: 'status', headerName: 'Status', width: 120 },\n    ],\n    []\n  );\n\n  const handlePaginationChange = (model: GridPaginationModel) => {\n    setPaginationModel({ page: model.page, pageSize: model.pageSize });\n  };\n\n  const NoExpensesOverlay = React.useCallback(() => (\n    <EmptyState\n      title=\"No expenses\"\n      description=\"There are no expenses to display.\"\n    />\n  ), [refetch]);\n\n  return (\n    <PageContainer\n      title=\"Expenses\"\n      actions={\n        <Stack direction=\"row\" spacing={1}>\n          <Button variant=\"outlined\" onClick={() => refetch()}>Refresh</Button>\n          <Button\n            variant=\"outlined\"\n            onClick={async () => {\n              const blob = await expenseService.exportExcel({ page: paginationModel.page, size: paginationModel.pageSize });\n              const url = window.URL.createObjectURL(blob);\n              const a = document.createElement('a');\n              a.href = url;\n              a.download = 'expenses.xlsx';\n              a.click();\n              window.URL.revokeObjectURL(url);\n            }}\n          >\n            Export\n          </Button>\n          <Button variant=\"contained\" onClick={() => navigate('/expenses/new')}>New</Button>\n        </Stack>\n      }\n    >\n      <Stack spacing={2}>\n        <SectionCard>\n          <Stack direction=\"row\" spacing={1.5} alignItems=\"center\" flexWrap=\"wrap\">\n            <Button variant=\"outlined\" onClick={() => fileInputRef.current?.click()}>Import</Button>\n            <input\n              type=\"file\"\n              accept=\".xlsx,.xls\"\n              ref={fileInputRef}\n              style={{ display: 'none' }}\n              onChange={async (e) => {\n                const file = e.target.files?.[0];\n                if (!file) return;\n                await expenseService.importExcel(file);\n                e.currentTarget.value = '';\n                refetch();\n              }}\n            />\n          </Stack>\n        </SectionCard>\n\n        <SectionCard>\n          <Box sx={{ height: 600, width: '100%' }}>\n            <DataGrid\n              rows={rows}\n              columns={columns}\n              getRowId={(row) => row.id}\n              loading={isLoading}\n              paginationMode=\"server\"\n              rowCount={rowCount}\n              pageSizeOptions={[5, 10, 25, 50]}\n              paginationModel={{ page: paginationModel.page, pageSize: paginationModel.pageSize }}\n              onPaginationModelChange={handlePaginationChange}\n              onRowClick={(params) => navigate(`/expenses/${params.id}`)}\n              disableRowSelectionOnClick\n              sx={standardDataGridSx}\n              slots={{ noRowsOverlay: NoExpensesOverlay }}\n            />\n          </Box>\n          {isError && (\n            <Typography variant=\"body2\" color=\"error\" sx={{ mt: 2 }}>\n              Failed to load expenses.\n            </Typography>\n          )}\n        </SectionCard>\n      </Stack>\n    </PageContainer>\n  );\n};\n\nexport default ExpenseList;"],"names":["ExpenseList","navigate","useNavigate","fileInputRef","React","paginationModel","setPaginationModel","data","isLoading","isError","refetch","useQuery","expenseService","keepPreviousData","page","rows","rowCount","columns","handlePaginationChange","model","NoExpensesOverlay","jsx","EmptyState","PageContainer","jsxs","Stack","Button","blob","url","a","SectionCard","_a","e","file","Box","DataGrid","row","params","standardDataGridSx","Typography"],"mappings":"+aAYA,MAAMA,EAAwB,IAAM,CAClC,MAAMC,EAAWC,EAAA,EACXC,EAAeC,EAAM,OAAyB,IAAI,EAClD,CAACC,EAAiBC,CAAkB,EAAIF,EAAM,SAClD,CAAE,KAAM,EAAG,SAAU,EAAA,CAAG,EAGpB,CAAE,KAAAG,EAAM,UAAAC,EAAW,QAAAC,EAAS,QAAAC,CAAA,EAAYC,EAAS,CACrD,SAAU,CAAC,WAAYN,EAAgB,KAAMA,EAAgB,QAAQ,EACrE,QAAS,SAAYO,EAAe,OAAO,CAAE,KAAMP,EAAgB,KAAM,KAAMA,EAAgB,SAAU,EACzG,gBAAiBQ,CAAA,CAClB,EAEKC,EAAOP,EACPQ,GAAkBD,GAAA,YAAAA,EAAM,UAAW,CAAA,EACnCE,GAAWF,GAAA,YAAAA,EAAM,gBAAiB,EAElCG,EAAUb,EAAM,QACpB,IAAM,CACJ,CAAE,MAAO,eAAgB,WAAY,WAAY,KAAM,IAAK,SAAU,GAAA,EACtE,CAAE,MAAO,kBAAmB,WAAY,OAAQ,KAAM,EAAG,SAAU,GAAA,EACnE,CAAE,MAAO,cAAe,WAAY,UAAW,KAAM,IAAK,SAAU,GAAA,EACpE,CAAE,MAAO,cAAe,WAAY,OAAQ,MAAO,GAAA,EACnD,CAAE,MAAO,SAAU,WAAY,SAAU,MAAO,GAAA,EAChD,CAAE,MAAO,WAAY,WAAY,WAAY,MAAO,GAAA,EACpD,CAAE,MAAO,SAAU,WAAY,SAAU,MAAO,GAAA,CAAI,EAEtD,CAAA,CAAC,EAGGc,EAA0BC,GAA+B,CAC7Db,EAAmB,CAAE,KAAMa,EAAM,KAAM,SAAUA,EAAM,SAAU,CACnE,EAEMC,EAAoBhB,EAAM,YAAY,IAC1CiB,EAAAA,IAACC,EAAA,CACC,MAAM,cACN,YAAY,mCAAA,CAAA,EAEb,CAACZ,CAAO,CAAC,EAEZ,OACEW,EAAAA,IAACE,EAAA,CACC,MAAM,WACN,QACEC,EAAAA,KAACC,EAAA,CAAM,UAAU,MAAM,QAAS,EAC9B,SAAA,CAAAJ,MAACK,GAAO,QAAQ,WAAW,QAAS,IAAMhB,EAAA,EAAW,SAAA,UAAO,EAC5DW,EAAAA,IAACK,EAAA,CACC,QAAQ,WACR,QAAS,SAAY,CACnB,MAAMC,EAAO,MAAMf,EAAe,YAAY,CAAE,KAAMP,EAAgB,KAAM,KAAMA,EAAgB,QAAA,CAAU,EACtGuB,EAAM,OAAO,IAAI,gBAAgBD,CAAI,EACrCE,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAOD,EACTC,EAAE,SAAW,gBACbA,EAAE,MAAA,EACF,OAAO,IAAI,gBAAgBD,CAAG,CAChC,EACD,SAAA,QAAA,CAAA,EAGDP,EAAAA,IAACK,GAAO,QAAQ,YAAY,QAAS,IAAMzB,EAAS,eAAe,EAAG,SAAA,KAAA,CAAG,CAAA,EAC3E,EAGF,SAAAuB,EAAAA,KAACC,EAAA,CAAM,QAAS,EACd,SAAA,CAAAJ,EAAAA,IAACS,EAAA,CACC,SAAAN,EAAAA,KAACC,EAAA,CAAM,UAAU,MAAM,QAAS,IAAK,WAAW,SAAS,SAAS,OAChE,SAAA,CAAAJ,EAAAA,IAACK,EAAA,CAAO,QAAQ,WAAW,QAAS,WAAM,OAAAK,EAAA5B,EAAa,UAAb,YAAA4B,EAAsB,SAAS,SAAA,QAAA,CAAM,EAC/EV,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,OAAO,aACP,IAAKlB,EACL,MAAO,CAAE,QAAS,MAAA,EAClB,SAAU,MAAO6B,GAAM,OACrB,MAAMC,GAAOF,EAAAC,EAAE,OAAO,QAAT,YAAAD,EAAiB,GACzBE,IACL,MAAMrB,EAAe,YAAYqB,CAAI,EACrCD,EAAE,cAAc,MAAQ,GACxBtB,EAAA,EACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CACF,SAECoB,EAAA,CACC,SAAA,CAAAT,MAACa,GAAI,GAAI,CAAE,OAAQ,IAAK,MAAO,QAC7B,SAAAb,EAAAA,IAACc,EAAA,CACC,KAAApB,EACA,QAAAE,EACA,SAAWmB,GAAQA,EAAI,GACvB,QAAS5B,EACT,eAAe,SACf,SAAAQ,EACA,gBAAiB,CAAC,EAAG,GAAI,GAAI,EAAE,EAC/B,gBAAiB,CAAE,KAAMX,EAAgB,KAAM,SAAUA,EAAgB,QAAA,EACzE,wBAAyBa,EACzB,WAAamB,GAAWpC,EAAS,aAAaoC,EAAO,EAAE,EAAE,EACzD,2BAA0B,GAC1B,GAAIC,EACJ,MAAO,CAAE,cAAelB,CAAA,CAAkB,CAAA,EAE9C,EACCX,GACCY,EAAAA,IAACkB,EAAA,CAAW,QAAQ,QAAQ,MAAM,QAAQ,GAAI,CAAE,GAAI,CAAA,EAAK,SAAA,0BAAA,CAEzD,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CAAA,CAGN"}
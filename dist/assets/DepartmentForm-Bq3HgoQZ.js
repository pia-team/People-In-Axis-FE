import{j as e,O as m,a8 as r,V as h}from"./mui-CYe98n_K.js";import{l as C,u as f,c as v}from"./vendor-XBP3t-ED.js";import{b as D}from"./index--2Lk4t6e.js";import{u as w}from"./useMutation-DaHtIydk.js";import{d as g}from"./departmentService-CaG7dTSx.js";import{P as N}from"./PageContainer-BfQWlLPL.js";import{S}from"./SectionCard-4aLOeFJ3.js";import"./utils-BgeKWveL.js";const M=()=>{const{id:i}=C(),s=!!i,x=f(),{data:b}=D({queryKey:["department",i],queryFn:async()=>g.getById(Number(i)),enabled:s}),a=b||void 0,[t,c]=v.useState({name:"",description:"",location:"",budget:void 0,companyId:void 0,managerId:void 0,parentDepartmentId:void 0});v.useEffect(()=>{a&&c({name:a.name,description:a.description||"",location:a.location||"",budget:a.budget,companyId:a.companyId,managerId:a.managerId??void 0,parentDepartmentId:a.parentDepartmentId??void 0})},[a]);const{mutateAsync:y,isPending:I}=w({mutationFn:async()=>{const n=t;if(!n.name||!n.companyId)throw new Error("Name and Company ID are required");return s?g.update(Number(i),n):g.create(n)}}),l=n=>u=>{const o=u.target.value;c(p=>({...p,[n]:o===""?"":o}))},d=n=>u=>{const o=u.target.value;c(p=>({...p,[n]:o===""?void 0:Number(o)}))},j=async()=>{try{await y(),x("/departments")}catch(n){console.error(n)}};return e.jsx(N,{title:s?"Edit Department":"New Department",children:e.jsx(S,{children:e.jsxs(m,{spacing:2,children:[e.jsxs(m,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(r,{label:"Name",value:t.name||"",onChange:l("name"),fullWidth:!0,required:!0}),e.jsx(r,{label:"Company ID",type:"number",value:t.companyId??"",onChange:d("companyId"),sx:{minWidth:200},required:!0}),e.jsx(r,{label:"Manager ID",type:"number",value:t.managerId??"",onChange:d("managerId"),sx:{minWidth:200}})]}),e.jsxs(m,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(r,{label:"Parent Department ID",type:"number",value:t.parentDepartmentId??"",onChange:d("parentDepartmentId"),sx:{minWidth:200}}),e.jsx(r,{label:"Location",value:t.location||"",onChange:l("location"),sx:{minWidth:200}}),e.jsx(r,{label:"Budget",type:"number",value:t.budget??"",onChange:d("budget"),sx:{minWidth:200}})]}),e.jsx(r,{label:"Description",value:t.description||"",onChange:l("description"),multiline:!0,minRows:3}),e.jsxs(m,{direction:"row",spacing:2,children:[e.jsx(h,{variant:"outlined",onClick:()=>x("/departments"),children:"Cancel"}),e.jsx(h,{variant:"contained",onClick:j,disabled:I,children:s?"Save":"Create"})]})]})})})};export{M as default};
//# sourceMappingURL=DepartmentForm-Bq3HgoQZ.js.map

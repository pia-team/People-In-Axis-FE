import{j as a,B as m,e as x,G as S,K as k,O as s}from"./mui-DyWukRpy.js";import{u as N,c as r}from"./vendor-zvfEP8kw.js";import{u as R}from"./useQuery-FIUzu5rJ.js";import{e as l}from"./expenseService-Dm-Xs5Id.js";import{D as z}from"./DataGrid-CLJ1UgxA.js";import{k as C}from"./index-CjnpFxxd.js";import"./utils-IvyUKLVR.js";const B=()=>{const c=N(),d=r.useRef(null),[t,g]=r.useState({page:0,pageSize:10}),{data:h,isLoading:u,isError:f,refetch:p}=R({queryKey:["expenses",t.page,t.pageSize],queryFn:async()=>l.getAll({page:t.page,size:t.pageSize}),placeholderData:C}),n=h,w=(n==null?void 0:n.content)??[],y=(n==null?void 0:n.totalElements)??0,j=r.useMemo(()=>[{field:"employeeName",headerName:"Employee",flex:1.2,minWidth:160},{field:"expenseTypeName",headerName:"Type",flex:1,minWidth:140},{field:"projectName",headerName:"Project",flex:1.2,minWidth:160},{field:"expenseDate",headerName:"Date",width:120},{field:"amount",headerName:"Amount",width:120},{field:"currency",headerName:"Currency",width:100},{field:"status",headerName:"Status",width:120}],[]),v=e=>{g({page:e.page,pageSize:e.pageSize})};return a.jsxs(m,{children:[a.jsx(x,{variant:"h4",component:"h1",gutterBottom:!0,children:"Expenses"}),a.jsxs(S,{sx:{p:2,mt:2},children:[a.jsxs(k,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:[a.jsx(s,{variant:"contained",onClick:()=>p(),children:"Refresh"}),a.jsx(s,{variant:"outlined",onClick:async()=>{const e=await l.exportExcel({page:t.page,size:t.pageSize}),o=window.URL.createObjectURL(e),i=document.createElement("a");i.href=o,i.download="expenses.xlsx",i.click(),window.URL.revokeObjectURL(o)},children:"Export"}),a.jsx(s,{variant:"outlined",onClick:()=>{var e;return(e=d.current)==null?void 0:e.click()},children:"Import"}),a.jsx("input",{type:"file",accept:".xlsx,.xls",ref:d,style:{display:"none"},onChange:async e=>{var i;const o=(i=e.target.files)==null?void 0:i[0];o&&(await l.importExcel(o),e.currentTarget.value="",p())}}),a.jsx(m,{flexGrow:1}),a.jsx(s,{variant:"contained",onClick:()=>c("/expenses/new"),children:"New"})]}),a.jsx("div",{style:{height:600,width:"100%"},children:a.jsx(z,{rows:w,columns:j,getRowId:e=>e.id,loading:u,paginationMode:"server",rowCount:y,pageSizeOptions:[5,10,25,50],paginationModel:{page:t.page,pageSize:t.pageSize},onPaginationModelChange:v,onRowClick:e=>c(`/expenses/${e.id}`),disableRowSelectionOnClick:!0})}),f&&a.jsx(x,{variant:"body2",color:"error",sx:{mt:2},children:"Failed to load expenses."})]})]})};export{B as default};
//# sourceMappingURL=ExpenseList-ChF26Qpu.js.map

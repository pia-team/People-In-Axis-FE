import{j as e,B as I,e as D,G as P,K as i,V as a,O as x}from"./mui-DyWukRpy.js";import{k as f,u as N,c as y}from"./vendor-zvfEP8kw.js";import{u as W}from"./useQuery-FIUzu5rJ.js";import{u as w}from"./useMutation-C26RIRiP.js";import{p as g}from"./projectService-4GD31wfU.js";import"./index-CjnpFxxd.js";import"./utils-IvyUKLVR.js";const F=()=>{const{id:l}=f(),d=!!l,h=N(),{data:j}=W({queryKey:["project",l],queryFn:async()=>g.getById(Number(l)),enabled:d}),t=j||void 0,[n,u]=y.useState({name:"",description:"",startDate:"",endDate:"",deadline:"",status:"",budget:void 0,spentAmount:void 0,currency:"",completionPercentage:void 0,priority:"",clientName:"",clientContact:"",companyId:void 0,projectManagerId:void 0});y.useEffect(()=>{t&&u({name:t.name,description:t.description,startDate:t.startDate||"",endDate:t.endDate||"",deadline:t.deadline||"",status:t.status||"",budget:t.budget,spentAmount:t.spentAmount,currency:t.currency||"",completionPercentage:t.completionPercentage,priority:t.priority||"",clientName:t.clientName||"",clientContact:t.clientContact||"",companyId:t.companyId,projectManagerId:t.projectManagerId})},[t]);const{mutateAsync:b,isPending:v}=w({mutationFn:async()=>{const o=n;if(!o.name||!o.companyId)throw new Error("Name and Company ID are required");return d?g.update(Number(l),o):g.create(o)}}),r=o=>m=>{const c=m.target.value;u(p=>({...p,[o]:c===""?"":c}))},s=o=>m=>{const c=m.target.value;u(p=>({...p,[o]:c===""?void 0:Number(c)}))},C=async()=>{try{await b(),h("/projects")}catch(o){console.error(o)}};return e.jsxs(I,{children:[e.jsx(D,{variant:"h4",component:"h1",gutterBottom:!0,children:d?"Edit Project":"New Project"}),e.jsx(P,{sx:{p:3,mt:2},children:e.jsxs(i,{spacing:2,children:[e.jsxs(i,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(a,{label:"Name",value:n.name||"",onChange:r("name"),fullWidth:!0,required:!0}),e.jsx(a,{label:"Company ID",type:"number",value:n.companyId??"",onChange:s("companyId"),sx:{minWidth:200},required:!0}),e.jsx(a,{label:"Manager ID",type:"number",value:n.projectManagerId??"",onChange:s("projectManagerId"),sx:{minWidth:200}})]}),e.jsx(a,{label:"Description",value:n.description||"",onChange:r("description"),multiline:!0,minRows:3}),e.jsxs(i,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(a,{label:"Start Date",type:"date",value:n.startDate||"",onChange:r("startDate"),InputLabelProps:{shrink:!0}}),e.jsx(a,{label:"End Date",type:"date",value:n.endDate||"",onChange:r("endDate"),InputLabelProps:{shrink:!0}}),e.jsx(a,{label:"Deadline",type:"date",value:n.deadline||"",onChange:r("deadline"),InputLabelProps:{shrink:!0}})]}),e.jsxs(i,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(a,{label:"Status",value:n.status||"",onChange:r("status"),sx:{minWidth:200}}),e.jsx(a,{label:"Budget",type:"number",value:n.budget??"",onChange:s("budget"),sx:{minWidth:200}}),e.jsx(a,{label:"Spent",type:"number",value:n.spentAmount??"",onChange:s("spentAmount"),sx:{minWidth:200}}),e.jsx(a,{label:"Currency",value:n.currency||"",onChange:r("currency"),sx:{minWidth:140}})]}),e.jsxs(i,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(a,{label:"Completion %",type:"number",value:n.completionPercentage??"",onChange:s("completionPercentage"),sx:{minWidth:200}}),e.jsx(a,{label:"Priority",value:n.priority||"",onChange:r("priority"),sx:{minWidth:200}}),e.jsx(a,{label:"Client",value:n.clientName||"",onChange:r("clientName"),sx:{minWidth:200}}),e.jsx(a,{label:"Contact",value:n.clientContact||"",onChange:r("clientContact"),sx:{minWidth:200}})]}),e.jsxs(i,{direction:"row",spacing:2,children:[e.jsx(x,{variant:"outlined",onClick:()=>h("/projects"),children:"Cancel"}),e.jsx(x,{variant:"contained",onClick:C,disabled:v,children:d?"Save":"Create"})]})]})})]})};export{F as default};
//# sourceMappingURL=ProjectForm-Kys4FXyz.js.map

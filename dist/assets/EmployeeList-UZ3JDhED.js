import{j as a,O as d,a8 as m,o as i,B as x,V as c,g as A}from"./mui-CYe98n_K.js";import{u as R,c as t}from"./vendor-XBP3t-ED.js";import{b as T,k as V}from"./index--2Lk4t6e.js";import{e as W}from"./employeeService-DDgcpw79.js";import{P as G}from"./PageContainer-BfQWlLPL.js";import{S as f}from"./SectionCard-4aLOeFJ3.js";import{D as P}from"./DataGrid-BXsRbnco.js";import"./utils-BgeKWveL.js";const J=()=>{const g=R(),[u,v]=t.useState(""),[r,C]=t.useState(""),[n,S]=t.useState(""),[p,N]=t.useState(""),[l,b]=t.useState([]),[o,j]=t.useState({page:0,pageSize:10}),{data:y,isLoading:w,isError:I,refetch:h}=T({queryKey:["employees",o.page,o.pageSize,u,r,n,p,l],queryFn:async()=>W.getAll({page:o.page,size:o.pageSize,search:u||void 0,companyId:r===""?void 0:Number(r),departmentId:n===""?void 0:Number(n),status:p||void 0,sort:(()=>{if(!l.length)return;const e=l[0];return`${{employeeCode:"employeeCode",fullName:"lastName",email:"email",status:"status"}[e.field]||e.field},${e.sort||"asc"}`})()}),placeholderData:V}),s=y,M=(s==null?void 0:s.content)??[],E=(s==null?void 0:s.totalElements)??0,k=t.useMemo(()=>[{field:"employeeCode",headerName:"Code",flex:1,minWidth:120},{field:"fullName",headerName:"Name",flex:1.2,minWidth:160,valueGetter:e=>e.row.fullName||`${e.row.firstName??""} ${e.row.lastName??""}`.trim()},{field:"email",headerName:"Email",flex:1.3,minWidth:200},{field:"companyName",headerName:"Company",flex:1,minWidth:140},{field:"departmentName",headerName:"Department",flex:1,minWidth:140},{field:"status",headerName:"Status",width:120}],[]),D=e=>{j({page:e.page,pageSize:e.pageSize})},z=e=>{b(e)};return a.jsx(G,{title:"Employees",actions:a.jsxs(d,{direction:"row",spacing:1,children:[a.jsx(c,{variant:"outlined",onClick:()=>h(),children:"Refresh"}),a.jsx(c,{variant:"contained",onClick:()=>g("/employees/new"),children:"New"})]}),children:a.jsxs(d,{spacing:2,children:[a.jsx(f,{children:a.jsxs(d,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:{xs:"stretch",sm:"center"},flexWrap:"wrap",children:[a.jsx(m,{size:"small",label:"Search",value:u,onChange:e=>v(e.target.value),sx:{minWidth:{xs:"100%",sm:240}}}),a.jsx(m,{size:"small",label:"Company ID",type:"number",value:r,onChange:e=>C(e.target.value===""?"":Number(e.target.value)),sx:{width:{xs:"100%",sm:160}}}),a.jsx(m,{size:"small",label:"Department ID",type:"number",value:n,onChange:e=>S(e.target.value===""?"":Number(e.target.value)),sx:{width:{xs:"100%",sm:180}}}),a.jsxs(m,{size:"small",label:"Status",select:!0,value:p,onChange:e=>N(e.target.value),sx:{width:{xs:"100%",sm:180}},children:[a.jsx(i,{value:"",children:"All"}),a.jsx(i,{value:"ACTIVE",children:"ACTIVE"}),a.jsx(i,{value:"INACTIVE",children:"INACTIVE"}),a.jsx(i,{value:"ON_LEAVE",children:"ON_LEAVE"}),a.jsx(i,{value:"TERMINATED",children:"TERMINATED"})]}),a.jsx(x,{sx:{flexGrow:1}}),a.jsxs(d,{direction:"row",spacing:1,children:[a.jsx(c,{variant:"outlined",onClick:()=>h(),children:"Reset"}),a.jsx(c,{variant:"contained",onClick:()=>h(),children:"Search"})]})]})}),a.jsxs(f,{children:[a.jsx(x,{sx:{height:620,width:"100%"},children:a.jsx(P,{rows:M,columns:k,getRowId:e=>e.id,loading:w,paginationMode:"server",sortingMode:"server",rowCount:E,pageSizeOptions:[5,10,25,50],paginationModel:{page:o.page,pageSize:o.pageSize},onPaginationModelChange:D,sortModel:l,onSortModelChange:z,onRowClick:e=>g(`/employees/${e.id}`),disableRowSelectionOnClick:!0,sx:{borderRadius:2,backgroundColor:"background.paper",border:"1px solid",borderColor:"divider","& .MuiDataGrid-columnHeaders":{backgroundColor:"background.default",borderBottom:"1px solid rgba(0,0,0,0.08)"},"& .MuiDataGrid-cell":{borderBottom:"1px solid rgba(0,0,0,0.05)"},"& .MuiDataGrid-row:hover":{backgroundColor:"rgba(79,70,229,0.04)"}}})}),I&&a.jsx(A,{variant:"body2",color:"error",sx:{mt:2},children:"Failed to load employees."})]})]})})};export{J as default};
//# sourceMappingURL=EmployeeList-UZ3JDhED.js.map

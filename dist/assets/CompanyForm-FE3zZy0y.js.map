{"version":3,"file":"CompanyForm-FE3zZy0y.js","sources":["../../src/pages/companies/CompanyForm.tsx"],"sourcesContent":["import React from 'react';\nimport { Box, Typography, Paper, Stack, TextField, Button } from '@mui/material';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useMutation, useQuery } from '@tanstack/react-query';\nimport { companyService } from '@/services/companyService';\nimport { Company, CompanyCreateDTO, CompanyUpdateDTO } from '@/types';\n\nconst CompanyForm: React.FC = () => {\n  const { id } = useParams();\n  const isEdit = Boolean(id);\n  const navigate = useNavigate();\n\n  const { data } = useQuery({\n    queryKey: ['company', id],\n    queryFn: async () => companyService.getById(Number(id)),\n    enabled: isEdit,\n  });\n\n  const existing = (data as Company | undefined) || undefined;\n\n  const [form, setForm] = React.useState<Partial<CompanyCreateDTO & CompanyUpdateDTO>>({\n    name: '',\n    taxNumber: '',\n    taxOffice: '',\n    email: '',\n    phone: '',\n    fax: '',\n    website: '',\n    address: '',\n    city: '',\n    district: '',\n    postalCode: '',\n    country: '',\n    logoUrl: '',\n    sector: '',\n    employeeCount: undefined,\n    establishedYear: undefined,\n    description: '',\n    parentCompanyId: undefined,\n  });\n\n  React.useEffect(() => {\n    if (existing) {\n      setForm({\n        name: existing.name,\n        taxNumber: existing.taxNumber || '',\n        taxOffice: existing.taxOffice || '',\n        email: existing.email || '',\n        phone: existing.phone || '',\n        fax: existing.fax || '',\n        website: existing.website || '',\n        address: existing.address || '',\n        city: existing.city || '',\n        district: existing.district || '',\n        postalCode: existing.postalCode || '',\n        country: existing.country || '',\n        logoUrl: existing.logoUrl || '',\n        sector: existing.sector || '',\n        employeeCount: existing.employeeCount,\n        establishedYear: existing.establishedYear,\n        description: existing.description || '',\n        parentCompanyId: existing.parentCompanyId ?? undefined,\n      });\n    }\n  }, [existing]);\n\n  const { mutateAsync: save, isPending } = useMutation({\n    mutationFn: async () => {\n      const payload = form as CompanyCreateDTO;\n      if (!payload.name) throw new Error('Name is required');\n      if (isEdit) {\n        return companyService.update(Number(id), payload as CompanyUpdateDTO);\n      }\n      return companyService.create(payload);\n    },\n  });\n\n  const handleChange = (key: keyof (CompanyCreateDTO & CompanyUpdateDTO)) => (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setForm((prev) => ({ ...prev, [key]: value }));\n  };\n\n  const handleNumber = (key: keyof (CompanyCreateDTO & CompanyUpdateDTO)) => (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setForm((prev) => ({ ...prev, [key]: value === '' ? undefined : Number(value) }));\n  };\n\n  const onSubmit = async () => {\n    try {\n      await save();\n      navigate('/companies');\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(err);\n    }\n  };\n\n  return (\n    <Box>\n      <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n        {isEdit ? 'Edit Company' : 'New Company'}\n      </Typography>\n      <Paper sx={{ p: 3, mt: 2 }}>\n        <Stack spacing={2}>\n          <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2}>\n            <TextField label=\"Name\" value={form.name || ''} onChange={handleChange('name')} fullWidth required />\n            <TextField label=\"Parent Company ID\" type=\"number\" value={form.parentCompanyId ?? ''} onChange={handleNumber('parentCompanyId')} sx={{ minWidth: 220 }} />\n          </Stack>\n          <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2}>\n            <TextField label=\"Tax Number\" value={form.taxNumber || ''} onChange={handleChange('taxNumber')} />\n            <TextField label=\"Tax Office\" value={form.taxOffice || ''} onChange={handleChange('taxOffice')} />\n            <TextField label=\"Email\" value={form.email || ''} onChange={handleChange('email')} />\n            <TextField label=\"Phone\" value={form.phone || ''} onChange={handleChange('phone')} />\n          </Stack>\n          <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2}>\n            <TextField label=\"Fax\" value={form.fax || ''} onChange={handleChange('fax')} />\n            <TextField label=\"Website\" value={form.website || ''} onChange={handleChange('website')} />\n            <TextField label=\"Logo URL\" value={form.logoUrl || ''} onChange={handleChange('logoUrl')} />\n            <TextField label=\"Sector\" value={form.sector || ''} onChange={handleChange('sector')} />\n          </Stack>\n          <TextField label=\"Address\" value={form.address || ''} onChange={handleChange('address')} multiline minRows={3} />\n          <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2}>\n            <TextField label=\"City\" value={form.city || ''} onChange={handleChange('city')} />\n            <TextField label=\"District\" value={form.district || ''} onChange={handleChange('district')} />\n            <TextField label=\"Postal Code\" value={form.postalCode || ''} onChange={handleChange('postalCode')} />\n            <TextField label=\"Country\" value={form.country || ''} onChange={handleChange('country')} />\n          </Stack>\n          <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2}>\n            <TextField label=\"Employee Count\" type=\"number\" value={form.employeeCount ?? ''} onChange={handleNumber('employeeCount')} />\n            <TextField label=\"Established Year\" type=\"number\" value={form.establishedYear ?? ''} onChange={handleNumber('establishedYear')} />\n          </Stack>\n          <TextField label=\"Description\" value={form.description || ''} onChange={handleChange('description')} multiline minRows={3} />\n          <Stack direction=\"row\" spacing={2}>\n            <Button variant=\"outlined\" onClick={() => navigate('/companies')}>Cancel</Button>\n            <Button variant=\"contained\" onClick={onSubmit} disabled={isPending}>{isEdit ? 'Save' : 'Create'}</Button>\n          </Stack>\n        </Stack>\n      </Paper>\n    </Box>\n  );\n};\n\nexport default CompanyForm;"],"names":["CompanyForm","id","useParams","isEdit","navigate","useNavigate","data","useQuery","companyService","existing","form","setForm","React","save","isPending","useMutation","payload","handleChange","key","e","value","prev","handleNumber","onSubmit","err","Box","jsx","Typography","Paper","jsxs","Stack","TextField","Button"],"mappings":"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"}
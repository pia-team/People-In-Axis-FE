{"version":3,"file":"UserManagement-8BPxhQiY.js","sources":["../../src/pages/admin/UserManagement.tsx"],"sourcesContent":["import React from 'react';\nimport { Typography, Stack, TextField, Button } from '@mui/material';\nimport { DataGrid, GridColDef, GridPaginationModel } from '@mui/x-data-grid';\nimport { useQuery, keepPreviousData } from '@tanstack/react-query';\nimport { employeeService } from '@/services/employeeService';\nimport { Employee, PaginatedResponse } from '@/types';\nimport PageContainer from '@/components/ui/PageContainer';\nimport SectionCard from '@/components/ui/SectionCard';\nimport { standardDataGridSx, NoRowsOverlay } from '@/components/ui/dataGridStyles';\n\nconst UserManagement: React.FC = () => {\n  const [search, setSearch] = React.useState('');\n  const [paginationModel, setPaginationModel] = React.useState<{ page: number; pageSize: number }>({ page: 0, pageSize: 10 });\n\n  const { data, isLoading, isError, refetch } = useQuery({\n    queryKey: ['users', paginationModel.page, paginationModel.pageSize, search],\n    queryFn: async () => employeeService.getAll({ page: paginationModel.page, size: paginationModel.pageSize, search: search || undefined }),\n    placeholderData: keepPreviousData,\n  });\n\n  const page = data as PaginatedResponse<Employee> | undefined;\n  const rows: Employee[] = page?.content ?? [];\n  const rowCount = page?.totalElements ?? 0;\n\n  const columns = React.useMemo<GridColDef<Employee>[]>(\n    () => [\n      { field: 'employeeCode', headerName: 'Code', width: 120 },\n      { field: 'fullName', headerName: 'Name', flex: 1.2, minWidth: 160,\n        valueGetter: (params) => params.row.fullName || `${params.row.firstName ?? ''} ${params.row.lastName ?? ''}`.trim(),\n      },\n      { field: 'email', headerName: 'Email', flex: 1.3, minWidth: 200 },\n      { field: 'companyName', headerName: 'Company', flex: 1, minWidth: 140 },\n      { field: 'departmentName', headerName: 'Department', flex: 1, minWidth: 140 },\n      { field: 'status', headerName: 'Status', width: 120 },\n    ],\n    []\n  );\n\n  const handlePaginationChange = (model: GridPaginationModel) => {\n    setPaginationModel({ page: model.page, pageSize: model.pageSize });\n  };\n\n  return (\n    <PageContainer title=\"User Management\" actions={<Button variant=\"outlined\" onClick={() => refetch()}>Refresh</Button>}>\n      <Stack spacing={2}>\n        <SectionCard>\n          <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2} alignItems={{ xs: 'stretch', sm: 'center' }}>\n            <TextField size=\"small\" label=\"Search\" value={search} onChange={(e) => setSearch(e.target.value)} />\n            <Button variant=\"contained\" onClick={() => refetch()}>Search</Button>\n          </Stack>\n        </SectionCard>\n        <SectionCard>\n          <div style={{ height: 600, width: '100%' }}>\n            <DataGrid\n              rows={rows}\n              columns={columns}\n              getRowId={(row) => row.id}\n              loading={isLoading}\n              paginationMode=\"server\"\n              rowCount={rowCount}\n              pageSizeOptions={[5, 10, 25, 50]}\n              paginationModel={{ page: paginationModel.page, pageSize: paginationModel.pageSize }}\n              onPaginationModelChange={handlePaginationChange}\n              disableRowSelectionOnClick\n              sx={standardDataGridSx}\n              slots={{ noRowsOverlay: NoRowsOverlay }}\n            />\n          </div>\n          {isError && (\n            <Typography variant=\"body2\" color=\"error\" sx={{ mt: 2 }}>\n              Failed to load users.\n            </Typography>\n          )}\n        </SectionCard>\n      </Stack>\n    </PageContainer>\n  );\n};\n\nexport default UserManagement;"],"names":["UserManagement","search","setSearch","React","paginationModel","setPaginationModel","data","isLoading","isError","refetch","useQuery","employeeService","keepPreviousData","page","rows","rowCount","columns","params","handlePaginationChange","model","PageContainer","jsx","Button","jsxs","Stack","SectionCard","TextField","e","DataGrid","row","standardDataGridSx","NoRowsOverlay","Typography"],"mappings":"0aAUA,MAAMA,EAA2B,IAAM,CACrC,KAAM,CAACC,EAAQC,CAAS,EAAIC,EAAM,SAAS,EAAE,EACvC,CAACC,EAAiBC,CAAkB,EAAIF,EAAM,SAA6C,CAAE,KAAM,EAAG,SAAU,GAAI,EAEpH,CAAE,KAAAG,EAAM,UAAAC,EAAW,QAAAC,EAAS,QAAAC,CAAA,EAAYC,EAAS,CACrD,SAAU,CAAC,QAASN,EAAgB,KAAMA,EAAgB,SAAUH,CAAM,EAC1E,QAAS,SAAYU,EAAgB,OAAO,CAAE,KAAMP,EAAgB,KAAM,KAAMA,EAAgB,SAAU,OAAQH,GAAU,OAAW,EACvI,gBAAiBW,CAAA,CAClB,EAEKC,EAAOP,EACPQ,GAAmBD,GAAA,YAAAA,EAAM,UAAW,CAAA,EACpCE,GAAWF,GAAA,YAAAA,EAAM,gBAAiB,EAElCG,EAAUb,EAAM,QACpB,IAAM,CACJ,CAAE,MAAO,eAAgB,WAAY,OAAQ,MAAO,GAAA,EACpD,CAAE,MAAO,WAAY,WAAY,OAAQ,KAAM,IAAK,SAAU,IAC5D,YAAcc,GAAWA,EAAO,IAAI,UAAY,GAAGA,EAAO,IAAI,WAAa,EAAE,IAAIA,EAAO,IAAI,UAAY,EAAE,GAAG,KAAA,CAAK,EAEpH,CAAE,MAAO,QAAS,WAAY,QAAS,KAAM,IAAK,SAAU,GAAA,EAC5D,CAAE,MAAO,cAAe,WAAY,UAAW,KAAM,EAAG,SAAU,GAAA,EAClE,CAAE,MAAO,iBAAkB,WAAY,aAAc,KAAM,EAAG,SAAU,GAAA,EACxE,CAAE,MAAO,SAAU,WAAY,SAAU,MAAO,GAAA,CAAI,EAEtD,CAAA,CAAC,EAGGC,EAA0BC,GAA+B,CAC7Dd,EAAmB,CAAE,KAAMc,EAAM,KAAM,SAAUA,EAAM,SAAU,CACnE,EAEA,aACGC,EAAA,CAAc,MAAM,kBAAkB,QAASC,EAAAA,IAACC,GAAO,QAAQ,WAAW,QAAS,IAAMb,IAAW,SAAA,SAAA,CAAO,EAC1G,SAAAc,EAAAA,KAACC,EAAA,CAAM,QAAS,EACd,SAAA,CAAAH,MAACI,GACC,SAAAF,EAAAA,KAACC,EAAA,CAAM,UAAW,CAAE,GAAI,SAAU,GAAI,OAAS,QAAS,EAAG,WAAY,CAAE,GAAI,UAAW,GAAI,UAC1F,SAAA,CAAAH,EAAAA,IAACK,EAAA,CAAU,KAAK,QAAQ,MAAM,SAAS,MAAOzB,EAAQ,SAAW0B,GAAMzB,EAAUyB,EAAE,OAAO,KAAK,EAAG,EAClGN,MAACC,GAAO,QAAQ,YAAY,QAAS,IAAMb,EAAA,EAAW,SAAA,QAAA,CAAM,CAAA,CAAA,CAC9D,CAAA,CACF,SACCgB,EAAA,CACC,SAAA,CAAAJ,MAAC,OAAI,MAAO,CAAE,OAAQ,IAAK,MAAO,QAChC,SAAAA,EAAAA,IAACO,EAAA,CACC,KAAAd,EACA,QAAAE,EACA,SAAWa,GAAQA,EAAI,GACvB,QAAStB,EACT,eAAe,SACf,SAAAQ,EACA,gBAAiB,CAAC,EAAG,GAAI,GAAI,EAAE,EAC/B,gBAAiB,CAAE,KAAMX,EAAgB,KAAM,SAAUA,EAAgB,QAAA,EACzE,wBAAyBc,EACzB,2BAA0B,GAC1B,GAAIY,EACJ,MAAO,CAAE,cAAeC,CAAA,CAAc,CAAA,EAE1C,EACCvB,GACCa,EAAAA,IAACW,EAAA,CAAW,QAAQ,QAAQ,MAAM,QAAQ,GAAI,CAAE,GAAI,CAAA,EAAK,SAAA,uBAAA,CAEzD,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,CAEJ"}
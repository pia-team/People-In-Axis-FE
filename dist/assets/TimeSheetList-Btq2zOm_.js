import{j as e,O as c,V as n,B as v,g as C}from"./mui-CYe98n_K.js";import{u as R,c as r}from"./vendor-XBP3t-ED.js";import{b as z,t as d,k as N}from"./index--2Lk4t6e.js";import{P as E}from"./PageContainer-BfQWlLPL.js";import{S as m}from"./SectionCard-4aLOeFJ3.js";import{E as b,s as D}from"./dataGridStyles-CXweFaFc.js";import{D as O}from"./DataGrid-BXsRbnco.js";import"./utils-BgeKWveL.js";const q=()=>{const p=R(),h=r.useRef(null),[a,g]=r.useState({page:0,pageSize:10}),{data:x,isLoading:u,isError:f,refetch:l}=z({queryKey:["timesheets",a.page,a.pageSize],queryFn:async()=>d.getAll({page:a.page,size:a.pageSize}),placeholderData:N}),i=x,w=(i==null?void 0:i.content)??[],S=(i==null?void 0:i.totalElements)??0,j=r.useMemo(()=>[{field:"employeeName",headerName:"Employee",flex:1.2,minWidth:160},{field:"projectName",headerName:"Project",flex:1.2,minWidth:160},{field:"workDate",headerName:"Date",width:120},{field:"hoursWorked",headerName:"Hours",width:100},{field:"status",headerName:"Status",width:120}],[]),y=t=>{g({page:t.page,pageSize:t.pageSize})},k=r.useCallback(()=>e.jsx(b,{title:"No timesheets",description:"There are no timesheets to display."}),[l]);return e.jsx(E,{title:"TimeSheets",actions:e.jsxs(c,{direction:"row",spacing:1,children:[e.jsx(n,{variant:"outlined",onClick:()=>l(),children:"Refresh"}),e.jsx(n,{variant:"outlined",onClick:async()=>{const t=await d.exportExcel({page:a.page,size:a.pageSize}),o=window.URL.createObjectURL(t),s=document.createElement("a");s.href=o,s.download="timesheets.xlsx",s.click(),window.URL.revokeObjectURL(o)},children:"Export"}),e.jsx(n,{variant:"contained",onClick:()=>p("/timesheets/new"),children:"New"})]}),children:e.jsxs(c,{spacing:2,children:[e.jsx(m,{children:e.jsxs(c,{direction:"row",spacing:1.5,alignItems:"center",flexWrap:"wrap",children:[e.jsx(n,{variant:"outlined",onClick:()=>{var t;return(t=h.current)==null?void 0:t.click()},children:"Import"}),e.jsx("input",{type:"file",accept:".xlsx,.xls",ref:h,style:{display:"none"},onChange:async t=>{var s;const o=(s=t.target.files)==null?void 0:s[0];o&&(await d.importExcel(o),t.currentTarget.value="",l())}})]})}),e.jsx(m,{children:e.jsx(v,{sx:{height:600,width:"100%"},children:e.jsx(O,{rows:w,columns:j,getRowId:t=>t.id,loading:u,paginationMode:"server",rowCount:S,pageSizeOptions:[5,10,25,50],paginationModel:{page:a.page,pageSize:a.pageSize},onPaginationModelChange:y,onRowClick:t=>p(`/timesheets/${t.id}`),disableRowSelectionOnClick:!0,sx:D,slots:{noRowsOverlay:k}})})}),f&&e.jsx(C,{variant:"body2",color:"error",sx:{mt:-1},children:"Failed to load timesheets."})]})})};export{q as default};
//# sourceMappingURL=TimeSheetList-Btq2zOm_.js.map

import{j as e,B as s,e as l,G as j,K as y,V as N,O as d}from"./mui-DyWukRpy.js";import{c as r}from"./vendor-zvfEP8kw.js";import{u as v}from"./useQuery-FIUzu5rJ.js";import{e as w}from"./employeeService-Gw0Ibffr.js";import{D as z}from"./DataGrid-CLJ1UgxA.js";import{k as C}from"./index-CjnpFxxd.js";import"./utils-IvyUKLVR.js";const E=()=>{const[o,m]=r.useState(""),[t,c]=r.useState({page:0,pageSize:10}),{data:h,isLoading:p,isError:g,refetch:n}=v({queryKey:["users",t.page,t.pageSize,o],queryFn:async()=>w.getAll({page:t.page,size:t.pageSize,search:o||void 0}),placeholderData:C}),i=h,u=(i==null?void 0:i.content)??[],x=(i==null?void 0:i.totalElements)??0,f=r.useMemo(()=>[{field:"employeeCode",headerName:"Code",width:120},{field:"fullName",headerName:"Name",flex:1.2,minWidth:160,valueGetter:a=>a.row.fullName||`${a.row.firstName??""} ${a.row.lastName??""}`.trim()},{field:"email",headerName:"Email",flex:1.3,minWidth:200},{field:"companyName",headerName:"Company",flex:1,minWidth:140},{field:"departmentName",headerName:"Department",flex:1,minWidth:140},{field:"status",headerName:"Status",width:120}],[]),S=a=>{c({page:a.page,pageSize:a.pageSize})};return e.jsxs(s,{children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:"User Management"}),e.jsxs(j,{sx:{p:2,mt:2},children:[e.jsxs(y,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:[e.jsx(N,{size:"small",label:"Search",value:o,onChange:a=>m(a.target.value)}),e.jsx(d,{variant:"contained",onClick:()=>n(),children:"Search"}),e.jsx(s,{flexGrow:1}),e.jsx(d,{variant:"outlined",onClick:()=>n(),children:"Refresh"})]}),e.jsx("div",{style:{height:600,width:"100%"},children:e.jsx(z,{rows:u,columns:f,getRowId:a=>a.id,loading:p,paginationMode:"server",rowCount:x,pageSizeOptions:[5,10,25,50],paginationModel:{page:t.page,pageSize:t.pageSize},onPaginationModelChange:S,disableRowSelectionOnClick:!0})}),g&&e.jsx(l,{variant:"body2",color:"error",sx:{mt:2},children:"Failed to load users."})]})]})};export{E as default};
//# sourceMappingURL=UserManagement-CJ6Y0CZL.js.map

{"version":3,"file":"ProjectList-DYKDu8eD.js","sources":["../../src/pages/projects/ProjectList.tsx"],"sourcesContent":["import React from 'react';\nimport { Typography, Stack, TextField, Button } from '@mui/material';\nimport { DataGrid, GridColDef, GridPaginationModel } from '@mui/x-data-grid';\nimport { useQuery, keepPreviousData } from '@tanstack/react-query';\nimport { useNavigate } from 'react-router-dom';\nimport { projectService } from '@/services/projectService';\nimport { Project, PaginatedResponse } from '@/types';\nimport PageContainer from '@/components/ui/PageContainer';\nimport SectionCard from '@/components/ui/SectionCard';\nimport { standardDataGridSx } from '@/components/ui/dataGridStyles';\nimport EmptyState from '@/components/ui/EmptyState';\n\nconst ProjectList: React.FC = () => {\n  const navigate = useNavigate();\n  const [search, setSearch] = React.useState('');\n  const [companyId, setCompanyId] = React.useState<number | ''>('');\n  const [paginationModel, setPaginationModel] = React.useState<{ page: number; pageSize: number }>({ page: 0, pageSize: 10 });\n\n  const { data, isLoading, isError, refetch } = useQuery({\n    queryKey: ['projects', paginationModel.page, paginationModel.pageSize, search, companyId],\n    queryFn: async () => projectService.getAll({\n      page: paginationModel.page,\n      size: paginationModel.pageSize,\n      search: search || undefined,\n      companyId: companyId === '' ? undefined : Number(companyId),\n    }),\n    placeholderData: keepPreviousData,\n  });\n\n  const page = data as PaginatedResponse<Project> | undefined;\n  const rows: Project[] = page?.content ?? [];\n  const rowCount = page?.totalElements ?? 0;\n\n  const columns = React.useMemo<GridColDef<Project>[]>(\n    () => [\n      { field: 'code', headerName: 'Code', width: 140 },\n      { field: 'name', headerName: 'Name', flex: 1.2, minWidth: 180 },\n      { field: 'companyName', headerName: 'Company', flex: 1, minWidth: 160 },\n      { field: 'projectManagerName', headerName: 'Manager', flex: 1, minWidth: 160 },\n      { field: 'status', headerName: 'Status', width: 140 },\n      { field: 'startDate', headerName: 'Start', width: 120 },\n      { field: 'deadline', headerName: 'Deadline', width: 120 },\n    ],\n    []\n  );\n\n  const handlePaginationChange = (model: GridPaginationModel) => {\n    setPaginationModel({ page: model.page, pageSize: model.pageSize });\n  };\n\n  const NoProjectsOverlay = React.useCallback(() => (\n    <EmptyState\n      title=\"No projects\"\n      description=\"There are no projects to display.\"\n    />\n  ), [refetch]);\n\n  return (\n    <PageContainer\n      title=\"Projects\"\n      actions={\n        <Stack direction=\"row\" spacing={1}>\n          <Button variant=\"outlined\" onClick={() => refetch()}>Refresh</Button>\n          <Button variant=\"contained\" onClick={() => navigate('/projects/new')}>New</Button>\n        </Stack>\n      }\n    >\n      <Stack spacing={2}>\n        <SectionCard>\n          <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2} alignItems={{ xs: 'stretch', sm: 'center' }}>\n            <TextField size=\"small\" label=\"Search\" value={search} onChange={(e) => setSearch(e.target.value)} />\n            <TextField size=\"small\" label=\"Company ID\" type=\"number\" value={companyId} onChange={(e) => setCompanyId(e.target.value === '' ? '' : Number(e.target.value))} sx={{ width: { xs: '100%', sm: 160 } }} />\n            <Button variant=\"contained\" onClick={() => refetch()}>Search</Button>\n          </Stack>\n        </SectionCard>\n        <SectionCard>\n          <div style={{ height: 600, width: '100%' }}>\n            <DataGrid\n              rows={rows}\n              columns={columns}\n              getRowId={(row) => row.id}\n              loading={isLoading}\n              paginationMode=\"server\"\n              rowCount={rowCount}\n              pageSizeOptions={[5, 10, 25, 50]}\n              paginationModel={{ page: paginationModel.page, pageSize: paginationModel.pageSize }}\n              onPaginationModelChange={handlePaginationChange}\n              onRowClick={(params) => navigate(`/projects/${params.id}`)}\n              disableRowSelectionOnClick\n              sx={standardDataGridSx}\n              slots={{ noRowsOverlay: NoProjectsOverlay }}\n            />\n          </div>\n          {isError && (\n            <Typography variant=\"body2\" color=\"error\" sx={{ mt: 2 }}>\n              Failed to load projects.\n            </Typography>\n          )}\n        </SectionCard>\n      </Stack>\n    </PageContainer>\n  );\n};\n\nexport default ProjectList;"],"names":["ProjectList","navigate","useNavigate","search","setSearch","React","companyId","setCompanyId","paginationModel","setPaginationModel","data","isLoading","isError","refetch","useQuery","projectService","keepPreviousData","page","rows","rowCount","columns","handlePaginationChange","model","NoProjectsOverlay","jsx","EmptyState","PageContainer","jsxs","Stack","Button","SectionCard","TextField","e","DataGrid","row","params","standardDataGridSx","Typography"],"mappings":"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"}
import{j as e,B as f,e as w,G as N,K as r,V as o,O as b}from"./mui-DyWukRpy.js";import{k as E,u as I,c as C}from"./vendor-zvfEP8kw.js";import{u as O}from"./useQuery-FIUzu5rJ.js";import{u as B}from"./useMutation-C26RIRiP.js";import{c as x}from"./companyService-B7KFBSs7.js";import"./index-CjnpFxxd.js";import"./utils-IvyUKLVR.js";const q=()=>{const{id:i}=E(),l=!!i,h=I(),{data:y}=O({queryKey:["company",i],queryFn:async()=>x.getById(Number(i)),enabled:l}),a=y||void 0,[n,u]=C.useState({name:"",taxNumber:"",taxOffice:"",email:"",phone:"",fax:"",website:"",address:"",city:"",district:"",postalCode:"",country:"",logoUrl:"",sector:"",employeeCount:void 0,establishedYear:void 0,description:"",parentCompanyId:void 0});C.useEffect(()=>{a&&u({name:a.name,taxNumber:a.taxNumber||"",taxOffice:a.taxOffice||"",email:a.email||"",phone:a.phone||"",fax:a.fax||"",website:a.website||"",address:a.address||"",city:a.city||"",district:a.district||"",postalCode:a.postalCode||"",country:a.country||"",logoUrl:a.logoUrl||"",sector:a.sector||"",employeeCount:a.employeeCount,establishedYear:a.establishedYear,description:a.description||"",parentCompanyId:a.parentCompanyId??void 0})},[a]);const{mutateAsync:g,isPending:v}=B({mutationFn:async()=>{const s=n;if(!s.name)throw new Error("Name is required");return l?x.update(Number(i),s):x.create(s)}}),t=s=>m=>{const c=m.target.value;u(p=>({...p,[s]:c}))},d=s=>m=>{const c=m.target.value;u(p=>({...p,[s]:c===""?void 0:Number(c)}))},j=async()=>{try{await g(),h("/companies")}catch(s){console.error(s)}};return e.jsxs(f,{children:[e.jsx(w,{variant:"h4",component:"h1",gutterBottom:!0,children:l?"Edit Company":"New Company"}),e.jsx(N,{sx:{p:3,mt:2},children:e.jsxs(r,{spacing:2,children:[e.jsxs(r,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(o,{label:"Name",value:n.name||"",onChange:t("name"),fullWidth:!0,required:!0}),e.jsx(o,{label:"Parent Company ID",type:"number",value:n.parentCompanyId??"",onChange:d("parentCompanyId"),sx:{minWidth:220}})]}),e.jsxs(r,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(o,{label:"Tax Number",value:n.taxNumber||"",onChange:t("taxNumber")}),e.jsx(o,{label:"Tax Office",value:n.taxOffice||"",onChange:t("taxOffice")}),e.jsx(o,{label:"Email",value:n.email||"",onChange:t("email")}),e.jsx(o,{label:"Phone",value:n.phone||"",onChange:t("phone")})]}),e.jsxs(r,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(o,{label:"Fax",value:n.fax||"",onChange:t("fax")}),e.jsx(o,{label:"Website",value:n.website||"",onChange:t("website")}),e.jsx(o,{label:"Logo URL",value:n.logoUrl||"",onChange:t("logoUrl")}),e.jsx(o,{label:"Sector",value:n.sector||"",onChange:t("sector")})]}),e.jsx(o,{label:"Address",value:n.address||"",onChange:t("address"),multiline:!0,minRows:3}),e.jsxs(r,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(o,{label:"City",value:n.city||"",onChange:t("city")}),e.jsx(o,{label:"District",value:n.district||"",onChange:t("district")}),e.jsx(o,{label:"Postal Code",value:n.postalCode||"",onChange:t("postalCode")}),e.jsx(o,{label:"Country",value:n.country||"",onChange:t("country")})]}),e.jsxs(r,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(o,{label:"Employee Count",type:"number",value:n.employeeCount??"",onChange:d("employeeCount")}),e.jsx(o,{label:"Established Year",type:"number",value:n.establishedYear??"",onChange:d("establishedYear")})]}),e.jsx(o,{label:"Description",value:n.description||"",onChange:t("description"),multiline:!0,minRows:3}),e.jsxs(r,{direction:"row",spacing:2,children:[e.jsx(b,{variant:"outlined",onClick:()=>h("/companies"),children:"Cancel"}),e.jsx(b,{variant:"contained",onClick:j,disabled:v,children:l?"Save":"Create"})]})]})})]})};export{q as default};
//# sourceMappingURL=CompanyForm-FE3zZy0y.js.map

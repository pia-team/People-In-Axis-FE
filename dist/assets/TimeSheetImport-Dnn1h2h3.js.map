{"version":3,"file":"TimeSheetImport-Dnn1h2h3.js","sources":["../../src/pages/timesheets/TimeSheetImport.tsx"],"sourcesContent":["import React from 'react';\nimport { Box, Typography, Stack, Button, LinearProgress } from '@mui/material';\nimport { useMutation } from '@tanstack/react-query';\nimport { timeSheetService } from '@/services/timesheetService';\nimport PageContainer from '@/components/ui/PageContainer';\nimport SectionCard from '@/components/ui/SectionCard';\n\nconst TimeSheetImport: React.FC = () => {\n  const [file, setFile] = React.useState<File | null>(null);\n  const [result, setResult] = React.useState<{\n    totalRows: number;\n    importedCount: number;\n    failedCount: number;\n    successRows: any[];\n    failedRows: any[];\n  } | null>(null);\n\n  const downloadTemplateMutation = useMutation({\n    mutationFn: timeSheetService.downloadImportTemplate,\n    onSuccess: (blob) => {\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'timesheet-import-template.xlsx';\n      a.click();\n      window.URL.revokeObjectURL(url);\n    },\n  });\n\n  const importMutation = useMutation({\n    mutationFn: (f: File) => timeSheetService.importExcel(f),\n    onSuccess: (data) => setResult(data as any),\n  });\n\n  return (\n    <PageContainer title=\"Timesheet Import\">\n      <SectionCard>\n        <Stack direction=\"row\" spacing={2} alignItems=\"center\" sx={{ mb: 2 }}>\n          <Button\n            variant=\"outlined\"\n            onClick={() => downloadTemplateMutation.mutate()}\n            disabled={downloadTemplateMutation.isPending}\n          >\n            Download Template\n          </Button>\n          <input\n            type=\"file\"\n            accept=\".xlsx,.xls\"\n            onChange={(e) => setFile(e.target.files?.[0] ?? null)}\n          />\n          <Button\n            variant=\"contained\"\n            onClick={() => file && importMutation.mutate(file)}\n            disabled={!file || importMutation.isPending}\n          >\n            Upload\n          </Button>\n        </Stack>\n        {(downloadTemplateMutation.isPending || importMutation.isPending) && <LinearProgress />}\n\n        {result && (\n          <Box sx={{ mt: 2 }}>\n            <Typography variant=\"h6\">Result</Typography>\n            <Typography>Total Rows: {result.totalRows}</Typography>\n            <Typography>Imported: {result.importedCount}</Typography>\n            <Typography>Failed: {result.failedCount}</Typography>\n          </Box>\n        )}\n      </SectionCard>\n    </PageContainer>\n  );\n};\n\nexport default TimeSheetImport;\n"],"names":["TimeSheetImport","file","setFile","React","result","setResult","downloadTemplateMutation","useMutation","timeSheetService","blob","url","a","importMutation","f","data","jsx","PageContainer","SectionCard","jsxs","Stack","Button","_a","LinearProgress","Box","Typography"],"mappings":"mUAOA,MAAMA,EAA4B,IAAM,CACtC,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAM,SAAsB,IAAI,EAClD,CAACC,EAAQC,CAAS,EAAIF,EAAM,SAMxB,IAAI,EAERG,EAA2BC,EAAY,CAC3C,WAAYC,EAAiB,uBAC7B,UAAYC,GAAS,CACnB,MAAMC,EAAM,OAAO,IAAI,gBAAgBD,CAAI,EACrCE,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAOD,EACTC,EAAE,SAAW,iCACbA,EAAE,MAAA,EACF,OAAO,IAAI,gBAAgBD,CAAG,CAChC,CAAA,CACD,EAEKE,EAAiBL,EAAY,CACjC,WAAaM,GAAYL,EAAiB,YAAYK,CAAC,EACvD,UAAYC,GAAST,EAAUS,CAAW,CAAA,CAC3C,EAED,OACEC,EAAAA,IAACC,EAAA,CAAc,MAAM,mBACnB,gBAACC,EAAA,CACC,SAAA,CAAAC,EAAAA,KAACC,EAAA,CAAM,UAAU,MAAM,QAAS,EAAG,WAAW,SAAS,GAAI,CAAE,GAAI,CAAA,EAC/D,SAAA,CAAAJ,EAAAA,IAACK,EAAA,CACC,QAAQ,WACR,QAAS,IAAMd,EAAyB,OAAA,EACxC,SAAUA,EAAyB,UACpC,SAAA,mBAAA,CAAA,EAGDS,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,OAAO,aACP,SAAW,GAAA,OAAM,OAAAb,IAAQmB,EAAA,EAAE,OAAO,QAAT,YAAAA,EAAiB,KAAM,IAAI,EAAA,CAAA,EAEtDN,EAAAA,IAACK,EAAA,CACC,QAAQ,YACR,QAAS,IAAMnB,GAAQW,EAAe,OAAOX,CAAI,EACjD,SAAU,CAACA,GAAQW,EAAe,UACnC,SAAA,QAAA,CAAA,CAED,EACF,GACEN,EAAyB,WAAaM,EAAe,kBAAeU,EAAA,EAAe,EAEpFlB,GACCc,EAAAA,KAACK,EAAA,CAAI,GAAI,CAAE,GAAI,GACb,SAAA,CAAAR,EAAAA,IAACS,EAAA,CAAW,QAAQ,KAAK,SAAA,SAAM,SAC9BA,EAAA,CAAW,SAAA,CAAA,eAAapB,EAAO,SAAA,EAAU,SACzCoB,EAAA,CAAW,SAAA,CAAA,aAAWpB,EAAO,aAAA,EAAc,SAC3CoB,EAAA,CAAW,SAAA,CAAA,WAASpB,EAAO,WAAA,CAAA,CAAY,CAAA,CAAA,CAC1C,CAAA,CAAA,CAEJ,CAAA,CACF,CAEJ"}
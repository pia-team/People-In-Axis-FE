import{j as e,O as r,a8 as j,V as c,g as w}from"./mui-CYe98n_K.js";import{u as v,c as o}from"./vendor-XBP3t-ED.js";import{b as N,k as z}from"./index--2Lk4t6e.js";import{c as k}from"./companyService-JGl_TVxM.js";import{P}from"./PageContainer-BfQWlLPL.js";import{S as l}from"./SectionCard-4aLOeFJ3.js";import{E as R,s as b}from"./dataGridStyles-CXweFaFc.js";import{D as E}from"./DataGrid-BXsRbnco.js";import"./utils-BgeKWveL.js";const L=()=>{const d=v(),[n,m]=o.useState(""),[i,p]=o.useState({page:0,pageSize:10}),{data:h,isLoading:g,isError:x,refetch:s}=N({queryKey:["companies",i.page,i.pageSize,n],queryFn:async()=>k.getAll({page:i.page,size:i.pageSize,search:n||void 0}),placeholderData:z}),t=h,u=(t==null?void 0:t.content)??[],f=(t==null?void 0:t.totalElements)??0,S=o.useMemo(()=>[{field:"code",headerName:"Code",width:140},{field:"name",headerName:"Name",flex:1.2,minWidth:180},{field:"taxNumber",headerName:"Tax No",width:140},{field:"email",headerName:"Email",flex:1,minWidth:200},{field:"phone",headerName:"Phone",width:140},{field:"city",headerName:"City",width:120},{field:"country",headerName:"Country",width:140}],[]),y=a=>{p({page:a.page,pageSize:a.pageSize})},C=o.useCallback(()=>e.jsx(R,{title:"No companies",description:"There are no companies to display."}),[s]);return e.jsx(P,{title:"Companies",actions:e.jsxs(r,{direction:"row",spacing:1,children:[e.jsx(c,{variant:"outlined",onClick:()=>s(),children:"Refresh"}),e.jsx(c,{variant:"contained",onClick:()=>d("/companies/new"),children:"New"})]}),children:e.jsxs(r,{spacing:2,children:[e.jsx(l,{children:e.jsxs(r,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:{xs:"stretch",sm:"center"},children:[e.jsx(j,{size:"small",label:"Search",value:n,onChange:a=>m(a.target.value),sx:{minWidth:{xs:"100%",sm:260}}}),e.jsx(c,{variant:"contained",onClick:()=>s(),children:"Search"})]})}),e.jsxs(l,{children:[e.jsx("div",{style:{height:600,width:"100%"},children:e.jsx(E,{rows:u,columns:S,getRowId:a=>a.id,loading:g,paginationMode:"server",rowCount:f,pageSizeOptions:[5,10,25,50],paginationModel:{page:i.page,pageSize:i.pageSize},onPaginationModelChange:y,onRowClick:a=>d(`/companies/${a.id}`),disableRowSelectionOnClick:!0,sx:b,slots:{noRowsOverlay:C}})}),x&&e.jsx(w,{variant:"body2",color:"error",sx:{mt:2},children:"Failed to load companies."})]})]})})};export{L as default};
//# sourceMappingURL=CompanyList-CzcgTaZS.js.map

import{j as e,O as i,a8 as o,V as C}from"./mui-CYe98n_K.js";import{l as j,u as w,c as b}from"./vendor-XBP3t-ED.js";import{b as N}from"./index--2Lk4t6e.js";import{u as E}from"./useMutation-DaHtIydk.js";import{c as x}from"./companyService-JGl_TVxM.js";import{P as S}from"./PageContainer-BfQWlLPL.js";import{S as I}from"./SectionCard-4aLOeFJ3.js";import"./utils-BgeKWveL.js";const B=()=>{const{id:r}=j(),l=!!r,h=w(),{data:y}=N({queryKey:["company",r],queryFn:async()=>x.getById(Number(r)),enabled:l}),a=y||void 0,[n,d]=b.useState({name:"",taxNumber:"",taxOffice:"",email:"",phone:"",fax:"",website:"",address:"",city:"",district:"",postalCode:"",country:"",logoUrl:"",sector:"",employeeCount:void 0,establishedYear:void 0,description:"",parentCompanyId:void 0});b.useEffect(()=>{a&&d({name:a.name,taxNumber:a.taxNumber||"",taxOffice:a.taxOffice||"",email:a.email||"",phone:a.phone||"",fax:a.fax||"",website:a.website||"",address:a.address||"",city:a.city||"",district:a.district||"",postalCode:a.postalCode||"",country:a.country||"",logoUrl:a.logoUrl||"",sector:a.sector||"",employeeCount:a.employeeCount,establishedYear:a.establishedYear,description:a.description||"",parentCompanyId:a.parentCompanyId??void 0})},[a]);const{mutateAsync:g,isPending:v}=E({mutationFn:async()=>{const s=n;if(!s.name)throw new Error("Name is required");return l?x.update(Number(r),s):x.create(s)}}),t=s=>u=>{const c=u.target.value;d(p=>({...p,[s]:c}))},m=s=>u=>{const c=u.target.value;d(p=>({...p,[s]:c===""?void 0:Number(c)}))},f=async()=>{try{await g(),h("/companies")}catch(s){console.error(s)}};return e.jsx(S,{title:l?"Edit Company":"New Company",children:e.jsx(I,{children:e.jsxs(i,{spacing:2,children:[e.jsxs(i,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(o,{label:"Name",value:n.name||"",onChange:t("name"),fullWidth:!0,required:!0}),e.jsx(o,{label:"Parent Company ID",type:"number",value:n.parentCompanyId??"",onChange:m("parentCompanyId"),sx:{minWidth:220}})]}),e.jsxs(i,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(o,{label:"Tax Number",value:n.taxNumber||"",onChange:t("taxNumber")}),e.jsx(o,{label:"Tax Office",value:n.taxOffice||"",onChange:t("taxOffice")}),e.jsx(o,{label:"Email",value:n.email||"",onChange:t("email")}),e.jsx(o,{label:"Phone",value:n.phone||"",onChange:t("phone")})]}),e.jsxs(i,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(o,{label:"Fax",value:n.fax||"",onChange:t("fax")}),e.jsx(o,{label:"Website",value:n.website||"",onChange:t("website")}),e.jsx(o,{label:"Logo URL",value:n.logoUrl||"",onChange:t("logoUrl")}),e.jsx(o,{label:"Sector",value:n.sector||"",onChange:t("sector")})]}),e.jsx(o,{label:"Address",value:n.address||"",onChange:t("address"),multiline:!0,minRows:3}),e.jsxs(i,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(o,{label:"City",value:n.city||"",onChange:t("city")}),e.jsx(o,{label:"District",value:n.district||"",onChange:t("district")}),e.jsx(o,{label:"Postal Code",value:n.postalCode||"",onChange:t("postalCode")}),e.jsx(o,{label:"Country",value:n.country||"",onChange:t("country")})]}),e.jsxs(i,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(o,{label:"Employee Count",type:"number",value:n.employeeCount??"",onChange:m("employeeCount")}),e.jsx(o,{label:"Established Year",type:"number",value:n.establishedYear??"",onChange:m("establishedYear")})]}),e.jsx(o,{label:"Description",value:n.description||"",onChange:t("description"),multiline:!0,minRows:3}),e.jsxs(i,{direction:"row",spacing:2,children:[e.jsx(C,{variant:"outlined",onClick:()=>h("/companies"),children:"Cancel"}),e.jsx(C,{variant:"contained",onClick:f,disabled:v,children:l?"Save":"Create"})]})]})})})};export{B as default};
//# sourceMappingURL=CompanyForm-BMRRMyuX.js.map

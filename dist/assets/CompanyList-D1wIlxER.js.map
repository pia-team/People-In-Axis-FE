{"version":3,"file":"CompanyList-D1wIlxER.js","sources":["../../src/pages/companies/CompanyList.tsx"],"sourcesContent":["import React from 'react';\nimport { Box, Typography, Paper, Stack, TextField, Button } from '@mui/material';\nimport { DataGrid, GridColDef, GridPaginationModel } from '@mui/x-data-grid';\nimport { useQuery, keepPreviousData } from '@tanstack/react-query';\nimport { useNavigate } from 'react-router-dom';\nimport { companyService } from '@/services/companyService';\nimport { Company, PaginatedResponse } from '@/types';\n\nconst CompanyList: React.FC = () => {\n  const navigate = useNavigate();\n  const [search, setSearch] = React.useState('');\n  const [paginationModel, setPaginationModel] = React.useState<{ page: number; pageSize: number }>(\n    { page: 0, pageSize: 10 }\n  );\n\n  const { data, isLoading, isError, refetch } = useQuery({\n    queryKey: ['companies', paginationModel.page, paginationModel.pageSize, search],\n    queryFn: async () => companyService.getAll({ page: paginationModel.page, size: paginationModel.pageSize, search: search || undefined }),\n    placeholderData: keepPreviousData,\n  });\n\n  const page = data as PaginatedResponse<Company> | undefined;\n  const rows: Company[] = page?.content ?? [];\n  const rowCount = page?.totalElements ?? 0;\n\n  const columns = React.useMemo<GridColDef<Company>[]>(\n    () => [\n      { field: 'code', headerName: 'Code', width: 140 },\n      { field: 'name', headerName: 'Name', flex: 1.2, minWidth: 180 },\n      { field: 'taxNumber', headerName: 'Tax No', width: 140 },\n      { field: 'email', headerName: 'Email', flex: 1, minWidth: 200 },\n      { field: 'phone', headerName: 'Phone', width: 140 },\n      { field: 'city', headerName: 'City', width: 120 },\n      { field: 'country', headerName: 'Country', width: 140 },\n    ],\n    []\n  );\n\n  const handlePaginationChange = (model: GridPaginationModel) => {\n    setPaginationModel({ page: model.page, pageSize: model.pageSize });\n  };\n\n  return (\n    <Box>\n      <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n        Companies\n      </Typography>\n      <Paper sx={{ p: 2, mt: 2 }}>\n        <Stack direction=\"row\" spacing={2} alignItems=\"center\" sx={{ mb: 2 }}>\n          <TextField size=\"small\" label=\"Search\" value={search} onChange={(e) => setSearch(e.target.value)} />\n          <Button variant=\"contained\" onClick={() => refetch()}>Search</Button>\n          <Box flexGrow={1} />\n          <Button variant=\"outlined\" onClick={() => refetch()}>Refresh</Button>\n          <Button variant=\"contained\" onClick={() => navigate('/companies/new')}>New</Button>\n        </Stack>\n        <div style={{ height: 600, width: '100%' }}>\n          <DataGrid\n            rows={rows}\n            columns={columns}\n            getRowId={(row) => row.id}\n            loading={isLoading}\n            paginationMode=\"server\"\n            rowCount={rowCount}\n            pageSizeOptions={[5, 10, 25, 50]}\n            paginationModel={{ page: paginationModel.page, pageSize: paginationModel.pageSize }}\n            onPaginationModelChange={handlePaginationChange}\n            onRowClick={(params) => navigate(`/companies/${params.id}`)}\n            disableRowSelectionOnClick\n          />\n        </div>\n        {isError && (\n          <Typography variant=\"body2\" color=\"error\" sx={{ mt: 2 }}>\n            Failed to load companies.\n          </Typography>\n        )}\n      </Paper>\n    </Box>\n  );\n};\n\nexport default CompanyList;"],"names":["CompanyList","navigate","useNavigate","search","setSearch","React","paginationModel","setPaginationModel","data","isLoading","isError","refetch","useQuery","companyService","keepPreviousData","page","rows","rowCount","columns","handlePaginationChange","model","Box","jsx","Typography","jsxs","Paper","Stack","TextField","e","Button","DataGrid","row","params"],"mappings":"2UAQA,MAAMA,EAAwB,IAAM,CAClC,MAAMC,EAAWC,EAAA,EACX,CAACC,EAAQC,CAAS,EAAIC,EAAM,SAAS,EAAE,EACvC,CAACC,EAAiBC,CAAkB,EAAIF,EAAM,SAClD,CAAE,KAAM,EAAG,SAAU,EAAA,CAAG,EAGpB,CAAE,KAAAG,EAAM,UAAAC,EAAW,QAAAC,EAAS,QAAAC,CAAA,EAAYC,EAAS,CACrD,SAAU,CAAC,YAAaN,EAAgB,KAAMA,EAAgB,SAAUH,CAAM,EAC9E,QAAS,SAAYU,EAAe,OAAO,CAAE,KAAMP,EAAgB,KAAM,KAAMA,EAAgB,SAAU,OAAQH,GAAU,OAAW,EACtI,gBAAiBW,CAAA,CAClB,EAEKC,EAAOP,EACPQ,GAAkBD,GAAA,YAAAA,EAAM,UAAW,CAAA,EACnCE,GAAWF,GAAA,YAAAA,EAAM,gBAAiB,EAElCG,EAAUb,EAAM,QACpB,IAAM,CACJ,CAAE,MAAO,OAAQ,WAAY,OAAQ,MAAO,GAAA,EAC5C,CAAE,MAAO,OAAQ,WAAY,OAAQ,KAAM,IAAK,SAAU,GAAA,EAC1D,CAAE,MAAO,YAAa,WAAY,SAAU,MAAO,GAAA,EACnD,CAAE,MAAO,QAAS,WAAY,QAAS,KAAM,EAAG,SAAU,GAAA,EAC1D,CAAE,MAAO,QAAS,WAAY,QAAS,MAAO,GAAA,EAC9C,CAAE,MAAO,OAAQ,WAAY,OAAQ,MAAO,GAAA,EAC5C,CAAE,MAAO,UAAW,WAAY,UAAW,MAAO,GAAA,CAAI,EAExD,CAAA,CAAC,EAGGc,EAA0BC,GAA+B,CAC7Db,EAAmB,CAAE,KAAMa,EAAM,KAAM,SAAUA,EAAM,SAAU,CACnE,EAEA,cACGC,EAAA,CACC,SAAA,CAAAC,EAAAA,IAACC,GAAW,QAAQ,KAAK,UAAU,KAAK,aAAY,GAAC,SAAA,WAAA,CAErD,EACAC,OAACC,GAAM,GAAI,CAAE,EAAG,EAAG,GAAI,GACrB,SAAA,CAAAD,EAAAA,KAACE,EAAA,CAAM,UAAU,MAAM,QAAS,EAAG,WAAW,SAAS,GAAI,CAAE,GAAI,CAAA,EAC/D,SAAA,CAAAJ,EAAAA,IAACK,EAAA,CAAU,KAAK,QAAQ,MAAM,SAAS,MAAOxB,EAAQ,SAAWyB,GAAMxB,EAAUwB,EAAE,OAAO,KAAK,EAAG,EAClGN,MAACO,GAAO,QAAQ,YAAY,QAAS,IAAMlB,EAAA,EAAW,SAAA,SAAM,EAC5DW,EAAAA,IAACD,EAAA,CAAI,SAAU,CAAA,CAAG,EAClBC,MAACO,GAAO,QAAQ,WAAW,QAAS,IAAMlB,EAAA,EAAW,SAAA,UAAO,EAC5DW,EAAAA,IAACO,GAAO,QAAQ,YAAY,QAAS,IAAM5B,EAAS,gBAAgB,EAAG,SAAA,KAAA,CAAG,CAAA,EAC5E,EACAqB,MAAC,OAAI,MAAO,CAAE,OAAQ,IAAK,MAAO,QAChC,SAAAA,EAAAA,IAACQ,EAAA,CACC,KAAAd,EACA,QAAAE,EACA,SAAWa,GAAQA,EAAI,GACvB,QAAStB,EACT,eAAe,SACf,SAAAQ,EACA,gBAAiB,CAAC,EAAG,GAAI,GAAI,EAAE,EAC/B,gBAAiB,CAAE,KAAMX,EAAgB,KAAM,SAAUA,EAAgB,QAAA,EACzE,wBAAyBa,EACzB,WAAaa,GAAW/B,EAAS,cAAc+B,EAAO,EAAE,EAAE,EAC1D,2BAA0B,EAAA,CAAA,EAE9B,EACCtB,GACCY,EAAAA,IAACC,EAAA,CAAW,QAAQ,QAAQ,MAAM,QAAQ,GAAI,CAAE,GAAI,CAAA,EAAK,SAAA,2BAAA,CAEzD,CAAA,CAAA,CAEJ,CAAA,EACF,CAEJ"}
import{j as e,O as c,V as o,B as C,g as N}from"./mui-CYe98n_K.js";import{u as k,c as r}from"./vendor-XBP3t-ED.js";import{b as E,k as R}from"./index--2Lk4t6e.js";import{e as d}from"./expenseService-YharjWb-.js";import{P as z}from"./PageContainer-BfQWlLPL.js";import{S as m}from"./SectionCard-4aLOeFJ3.js";import{E as b,s as D}from"./dataGridStyles-CXweFaFc.js";import{D as O}from"./DataGrid-BXsRbnco.js";import"./utils-BgeKWveL.js";const A=()=>{const p=k(),x=r.useRef(null),[t,g]=r.useState({page:0,pageSize:10}),{data:h,isLoading:u,isError:f,refetch:l}=E({queryKey:["expenses",t.page,t.pageSize],queryFn:async()=>d.getAll({page:t.page,size:t.pageSize}),placeholderData:R}),n=h,w=(n==null?void 0:n.content)??[],y=(n==null?void 0:n.totalElements)??0,j=r.useMemo(()=>[{field:"employeeName",headerName:"Employee",flex:1.2,minWidth:160},{field:"expenseTypeName",headerName:"Type",flex:1,minWidth:140},{field:"projectName",headerName:"Project",flex:1.2,minWidth:160},{field:"expenseDate",headerName:"Date",width:120},{field:"amount",headerName:"Amount",width:120},{field:"currency",headerName:"Currency",width:100},{field:"status",headerName:"Status",width:120}],[]),S=a=>{g({page:a.page,pageSize:a.pageSize})},v=r.useCallback(()=>e.jsx(b,{title:"No expenses",description:"There are no expenses to display."}),[l]);return e.jsx(z,{title:"Expenses",actions:e.jsxs(c,{direction:"row",spacing:1,children:[e.jsx(o,{variant:"outlined",onClick:()=>l(),children:"Refresh"}),e.jsx(o,{variant:"outlined",onClick:async()=>{const a=await d.exportExcel({page:t.page,size:t.pageSize}),s=window.URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download="expenses.xlsx",i.click(),window.URL.revokeObjectURL(s)},children:"Export"}),e.jsx(o,{variant:"contained",onClick:()=>p("/expenses/new"),children:"New"})]}),children:e.jsxs(c,{spacing:2,children:[e.jsx(m,{children:e.jsxs(c,{direction:"row",spacing:1.5,alignItems:"center",flexWrap:"wrap",children:[e.jsx(o,{variant:"outlined",onClick:()=>{var a;return(a=x.current)==null?void 0:a.click()},children:"Import"}),e.jsx("input",{type:"file",accept:".xlsx,.xls",ref:x,style:{display:"none"},onChange:async a=>{var i;const s=(i=a.target.files)==null?void 0:i[0];s&&(await d.importExcel(s),a.currentTarget.value="",l())}})]})}),e.jsxs(m,{children:[e.jsx(C,{sx:{height:600,width:"100%"},children:e.jsx(O,{rows:w,columns:j,getRowId:a=>a.id,loading:u,paginationMode:"server",rowCount:y,pageSizeOptions:[5,10,25,50],paginationModel:{page:t.page,pageSize:t.pageSize},onPaginationModelChange:S,onRowClick:a=>p(`/expenses/${a.id}`),disableRowSelectionOnClick:!0,sx:D,slots:{noRowsOverlay:v}})}),f&&e.jsx(N,{variant:"body2",color:"error",sx:{mt:2},children:"Failed to load expenses."})]})]})})};export{A as default};
//# sourceMappingURL=ExpenseList-DQk3xQad.js.map

{"version":3,"file":"EmployeeList-UZ3JDhED.js","sources":["../../src/pages/employees/EmployeeList.tsx"],"sourcesContent":["import React from 'react';\nimport { Box, TextField, Button, Stack, MenuItem, Typography } from '@mui/material';\nimport { DataGrid, GridColDef, GridPaginationModel, GridSortModel } from '@mui/x-data-grid';\nimport { useQuery, keepPreviousData } from '@tanstack/react-query';\nimport { useNavigate } from 'react-router-dom';\nimport { employeeService } from '@/services/employeeService';\nimport { Employee, PaginatedResponse } from '@/types';\nimport PageContainer from '@/components/ui/PageContainer';\nimport SectionCard from '@/components/ui/SectionCard';\n\nconst EmployeeList: React.FC = () => {\n  const navigate = useNavigate();\n  const [search, setSearch] = React.useState('');\n  const [companyId, setCompanyId] = React.useState<number | ''>('');\n  const [departmentId, setDepartmentId] = React.useState<number | ''>('');\n  const [status, setStatus] = React.useState<string>('');\n  const [sortModel, setSortModel] = React.useState<GridSortModel>([]);\n  const [paginationModel, setPaginationModel] = React.useState<{\n    page: number;\n    pageSize: number;\n  }>({ page: 0, pageSize: 10 });\n\n  const { data, isLoading, isError, refetch } = useQuery({\n    queryKey: ['employees', paginationModel.page, paginationModel.pageSize, search, companyId, departmentId, status, sortModel],\n    queryFn: async () =>\n      employeeService.getAll({\n        page: paginationModel.page,\n        size: paginationModel.pageSize,\n        search: search || undefined,\n        companyId: companyId === '' ? undefined : Number(companyId),\n        departmentId: departmentId === '' ? undefined : Number(departmentId),\n        status: status || undefined,\n        sort: (() => {\n          if (!sortModel.length) return undefined;\n          const s = sortModel[0];\n          const fieldMap: Record<string, string> = {\n            employeeCode: 'employeeCode',\n            fullName: 'lastName',\n            email: 'email',\n            status: 'status',\n          };\n          const field = fieldMap[s.field] || s.field;\n          return `${field},${s.sort || 'asc'}`;\n        })(),\n      }),\n    placeholderData: keepPreviousData,\n  });\n\n  const page = data as PaginatedResponse<Employee> | undefined;\n  const rows: Employee[] = page?.content ?? [];\n  const rowCount = page?.totalElements ?? 0;\n\n  const columns = React.useMemo<GridColDef<Employee>[]>(\n    () => [\n      { field: 'employeeCode', headerName: 'Code', flex: 1, minWidth: 120 },\n      { field: 'fullName', headerName: 'Name', flex: 1.2, minWidth: 160,\n        valueGetter: (params) => params.row.fullName || `${params.row.firstName ?? ''} ${params.row.lastName ?? ''}`.trim(),\n      },\n      { field: 'email', headerName: 'Email', flex: 1.3, minWidth: 200 },\n      { field: 'companyName', headerName: 'Company', flex: 1, minWidth: 140 },\n      { field: 'departmentName', headerName: 'Department', flex: 1, minWidth: 140 },\n      { field: 'status', headerName: 'Status', width: 120 },\n    ],\n    []\n  );\n\n  const handlePaginationChange = (model: GridPaginationModel) => {\n    setPaginationModel({ page: model.page, pageSize: model.pageSize });\n  };\n\n  const handleSortModelChange = (model: GridSortModel) => {\n    setSortModel(model);\n  };\n\n  return (\n    <PageContainer\n      title=\"Employees\"\n      actions={\n        <Stack direction=\"row\" spacing={1}>\n          <Button variant=\"outlined\" onClick={() => refetch()}>Refresh</Button>\n          <Button variant=\"contained\" onClick={() => navigate('/employees/new')}>New</Button>\n        </Stack>\n      }\n    >\n      <Stack spacing={2}>\n        <SectionCard>\n          <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2} alignItems={{ xs: 'stretch', sm: 'center' }} flexWrap=\"wrap\">\n            <TextField\n              size=\"small\"\n              label=\"Search\"\n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n              sx={{ minWidth: { xs: '100%', sm: 240 } }}\n            />\n            <TextField\n              size=\"small\"\n              label=\"Company ID\"\n              type=\"number\"\n              value={companyId}\n              onChange={(e) => setCompanyId(e.target.value === '' ? '' : Number(e.target.value))}\n              sx={{ width: { xs: '100%', sm: 160 } }}\n            />\n            <TextField\n              size=\"small\"\n              label=\"Department ID\"\n              type=\"number\"\n              value={departmentId}\n              onChange={(e) => setDepartmentId(e.target.value === '' ? '' : Number(e.target.value))}\n              sx={{ width: { xs: '100%', sm: 180 } }}\n            />\n            <TextField\n              size=\"small\"\n              label=\"Status\"\n              select\n              value={status}\n              onChange={(e) => setStatus(e.target.value)}\n              sx={{ width: { xs: '100%', sm: 180 } }}\n            >\n              <MenuItem value=\"\">All</MenuItem>\n              <MenuItem value=\"ACTIVE\">ACTIVE</MenuItem>\n              <MenuItem value=\"INACTIVE\">INACTIVE</MenuItem>\n              <MenuItem value=\"ON_LEAVE\">ON_LEAVE</MenuItem>\n              <MenuItem value=\"TERMINATED\">TERMINATED</MenuItem>\n            </TextField>\n            <Box sx={{ flexGrow: 1 }} />\n            <Stack direction=\"row\" spacing={1}>\n              <Button variant=\"outlined\" onClick={() => refetch()}>Reset</Button>\n              <Button variant=\"contained\" onClick={() => refetch()}>Search</Button>\n            </Stack>\n          </Stack>\n        </SectionCard>\n\n        <SectionCard>\n          <Box sx={{ height: 620, width: '100%' }}>\n            <DataGrid\n              rows={rows}\n              columns={columns}\n              getRowId={(row) => row.id}\n              loading={isLoading}\n              paginationMode=\"server\"\n              sortingMode=\"server\"\n              rowCount={rowCount}\n              pageSizeOptions={[5, 10, 25, 50]}\n              paginationModel={{ page: paginationModel.page, pageSize: paginationModel.pageSize }}\n              onPaginationModelChange={handlePaginationChange}\n              sortModel={sortModel}\n              onSortModelChange={handleSortModelChange}\n              onRowClick={(params) => navigate(`/employees/${params.id}`)}\n              disableRowSelectionOnClick\n              sx={{\n                borderRadius: 2,\n                backgroundColor: 'background.paper',\n                border: '1px solid',\n                borderColor: 'divider',\n                '& .MuiDataGrid-columnHeaders': {\n                  backgroundColor: 'background.default',\n                  borderBottom: '1px solid rgba(0,0,0,0.08)'\n                },\n                '& .MuiDataGrid-cell': {\n                  borderBottom: '1px solid rgba(0,0,0,0.05)'\n                },\n                '& .MuiDataGrid-row:hover': {\n                  backgroundColor: 'rgba(79,70,229,0.04)'\n                },\n              }}\n            />\n          </Box>\n          {isError && (\n            <Typography variant=\"body2\" color=\"error\" sx={{ mt: 2 }}>\n              Failed to load employees.\n            </Typography>\n          )}\n        </SectionCard>\n      </Stack>\n    </PageContainer>\n  );\n};\n\nexport default EmployeeList;"],"names":["EmployeeList","navigate","useNavigate","search","setSearch","React","companyId","setCompanyId","departmentId","setDepartmentId","status","setStatus","sortModel","setSortModel","paginationModel","setPaginationModel","data","isLoading","isError","refetch","useQuery","employeeService","s","keepPreviousData","page","rows","rowCount","columns","params","handlePaginationChange","model","handleSortModelChange","jsx","PageContainer","jsxs","Stack","Button","SectionCard","TextField","MenuItem","Box","DataGrid","row","Typography"],"mappings":"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"}
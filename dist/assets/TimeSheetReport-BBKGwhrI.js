import{j as t,O as y,V as s,g as R}from"./mui-CYe98n_K.js";import{c as n}from"./vendor-XBP3t-ED.js";import{b as k,t as d,k as v}from"./index--2Lk4t6e.js";import{P as z}from"./PageContainer-BfQWlLPL.js";import{S as N}from"./SectionCard-4aLOeFJ3.js";import{N as b,s as C}from"./dataGridStyles-CXweFaFc.js";import{D}from"./DataGrid-BXsRbnco.js";import"./utils-BgeKWveL.js";const q=()=>{const[a,l]=n.useState({page:0,pageSize:10}),{data:c,isLoading:p,isError:m,refetch:h}=k({queryKey:["timesheets","report",a.page,a.pageSize],queryFn:async()=>d.getAll({page:a.page,size:a.pageSize}),placeholderData:v}),o=c,g=(o==null?void 0:o.content)??[],x=(o==null?void 0:o.totalElements)??0,u=n.useMemo(()=>[{field:"employeeName",headerName:"Employee",flex:1,minWidth:160},{field:"projectName",headerName:"Project",flex:1.2,minWidth:180},{field:"workDate",headerName:"Date",width:120},{field:"hoursWorked",headerName:"Hours",width:120},{field:"status",headerName:"Status",width:140}],[]),w=e=>{l({page:e.page,pageSize:e.pageSize})},S=(e,j)=>{const r=window.URL.createObjectURL(e),i=document.createElement("a");i.href=r,i.download=j,i.click(),window.URL.revokeObjectURL(r)},f=async()=>{const e=await d.exportExcel({page:0,size:1e3});S(e,"timesheets.xlsx")};return t.jsx(z,{title:"TimeSheet Report",actions:t.jsx(s,{variant:"outlined",onClick:()=>h(),children:"Refresh"}),children:t.jsxs(N,{children:[t.jsx(y,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:t.jsx(s,{variant:"contained",onClick:f,children:"Export"})}),t.jsx("div",{style:{height:600,width:"100%"},children:t.jsx(D,{rows:g,columns:u,getRowId:e=>e.id,loading:p,paginationMode:"server",rowCount:x,pageSizeOptions:[5,10,25,50],paginationModel:{page:a.page,pageSize:a.pageSize},onPaginationModelChange:w,disableRowSelectionOnClick:!0,sx:C,slots:{noRowsOverlay:b}})}),m&&t.jsx(R,{variant:"body2",color:"error",sx:{mt:2},children:"Failed to load timesheets."})]})})};export{q as default};
//# sourceMappingURL=TimeSheetReport-BBKGwhrI.js.map

import{j as e,B as R,e as r,G as z,K as E,O as s}from"./mui-DyWukRpy.js";import{c as d}from"./vendor-zvfEP8kw.js";import{u as N}from"./useQuery-FIUzu5rJ.js";import{e as c}from"./expenseService-Dm-Xs5Id.js";import{D as v}from"./DataGrid-CLJ1UgxA.js";import{k}from"./index-CjnpFxxd.js";import"./utils-IvyUKLVR.js";const B=()=>{const[a,p]=d.useState({page:0,pageSize:10}),{data:l,isLoading:m,isError:h,refetch:x}=N({queryKey:["expenses","report",a.page,a.pageSize],queryFn:async()=>c.getAll({page:a.page,size:a.pageSize}),placeholderData:k}),o=l,g=(o==null?void 0:o.content)??[],u=(o==null?void 0:o.totalElements)??0,f=d.useMemo(()=>[{field:"employeeName",headerName:"Employee",flex:1,minWidth:160},{field:"expenseTypeName",headerName:"Type",flex:1,minWidth:140},{field:"projectName",headerName:"Project",flex:1.2,minWidth:180},{field:"expenseDate",headerName:"Date",width:120},{field:"amount",headerName:"Amount",width:120},{field:"currency",headerName:"Currency",width:100},{field:"status",headerName:"Status",width:140}],[]),w=t=>{p({page:t.page,pageSize:t.pageSize})},y=(t,S)=>{const i=window.URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download=S,n.click(),window.URL.revokeObjectURL(i)},j=async()=>{const t=await c.exportExcel({page:0,size:1e3});y(t,"expenses.xlsx")};return e.jsxs(R,{children:[e.jsx(r,{variant:"h4",component:"h1",gutterBottom:!0,children:"Expense Report"}),e.jsxs(z,{sx:{p:2,mt:2},children:[e.jsxs(E,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:[e.jsx(s,{variant:"outlined",onClick:()=>x(),children:"Refresh"}),e.jsx(s,{variant:"contained",onClick:j,children:"Export"})]}),e.jsx("div",{style:{height:600,width:"100%"},children:e.jsx(v,{rows:g,columns:f,getRowId:t=>t.id,loading:m,paginationMode:"server",rowCount:u,pageSizeOptions:[5,10,25,50],paginationModel:{page:a.page,pageSize:a.pageSize},onPaginationModelChange:w,disableRowSelectionOnClick:!0})}),h&&e.jsx(r,{variant:"body2",color:"error",sx:{mt:2},children:"Failed to load expenses."})]})]})};export{B as default};
//# sourceMappingURL=ExpenseReport-B7b9lmlN.js.map

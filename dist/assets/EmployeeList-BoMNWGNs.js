import{j as a,B as g,e as x,G as A,K as T,V as d,k as i,O as u}from"./mui-DyWukRpy.js";import{u as k,c as t}from"./vendor-zvfEP8kw.js";import{k as R}from"./index-CjnpFxxd.js";import{u as V}from"./useQuery-FIUzu5rJ.js";import{e as O}from"./employeeService-Gw0Ibffr.js";import{D as P}from"./DataGrid-CLJ1UgxA.js";import"./utils-IvyUKLVR.js";const Q=()=>{const p=k(),[m,v]=t.useState(""),[l,f]=t.useState(""),[n,y]=t.useState(""),[c,N]=t.useState(""),[r,S]=t.useState([]),[s,C]=t.useState({page:0,pageSize:10}),{data:j,isLoading:I,isError:E,refetch:h}=V({queryKey:["employees",s.page,s.pageSize,m,l,n,c,r],queryFn:async()=>O.getAll({page:s.page,size:s.pageSize,search:m||void 0,companyId:l===""?void 0:Number(l),departmentId:n===""?void 0:Number(n),status:c||void 0,sort:(()=>{if(!r.length)return;const e=r[0];return`${{employeeCode:"employeeCode",fullName:"lastName",email:"email",status:"status"}[e.field]||e.field},${e.sort||"asc"}`})()}),placeholderData:R}),o=j,w=(o==null?void 0:o.content)??[],M=(o==null?void 0:o.totalElements)??0,b=t.useMemo(()=>[{field:"employeeCode",headerName:"Code",flex:1,minWidth:120},{field:"fullName",headerName:"Name",flex:1.2,minWidth:160,valueGetter:e=>e.row.fullName||`${e.row.firstName??""} ${e.row.lastName??""}`.trim()},{field:"email",headerName:"Email",flex:1.3,minWidth:200},{field:"companyName",headerName:"Company",flex:1,minWidth:140},{field:"departmentName",headerName:"Department",flex:1,minWidth:140},{field:"status",headerName:"Status",width:120}],[]),z=e=>{C({page:e.page,pageSize:e.pageSize})},D=e=>{S(e)};return a.jsxs(g,{children:[a.jsx(x,{variant:"h4",component:"h1",gutterBottom:!0,children:"Employees"}),a.jsxs(A,{sx:{p:2,mt:2},children:[a.jsxs(T,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:[a.jsx(d,{size:"small",label:"Search",value:m,onChange:e=>v(e.target.value)}),a.jsx(d,{size:"small",label:"Company ID",type:"number",value:l,onChange:e=>f(e.target.value===""?"":Number(e.target.value)),sx:{width:140}}),a.jsx(d,{size:"small",label:"Department ID",type:"number",value:n,onChange:e=>y(e.target.value===""?"":Number(e.target.value)),sx:{width:160}}),a.jsxs(d,{size:"small",label:"Status",select:!0,value:c,onChange:e=>N(e.target.value),sx:{width:160},children:[a.jsx(i,{value:"",children:"All"}),a.jsx(i,{value:"ACTIVE",children:"ACTIVE"}),a.jsx(i,{value:"INACTIVE",children:"INACTIVE"}),a.jsx(i,{value:"ON_LEAVE",children:"ON_LEAVE"}),a.jsx(i,{value:"TERMINATED",children:"TERMINATED"})]}),a.jsx(u,{variant:"contained",onClick:()=>h(),children:"Search"}),a.jsx(g,{flexGrow:1}),a.jsx(u,{variant:"outlined",onClick:()=>h(),children:"Refresh"}),a.jsx(u,{variant:"contained",onClick:()=>p("/employees/new"),children:"New"})]}),a.jsx("div",{style:{height:600,width:"100%"},children:a.jsx(P,{rows:w,columns:b,getRowId:e=>e.id,loading:I,paginationMode:"server",sortingMode:"server",rowCount:M,pageSizeOptions:[5,10,25,50],paginationModel:{page:s.page,pageSize:s.pageSize},onPaginationModelChange:z,sortModel:r,onSortModelChange:D,onRowClick:e=>p(`/employees/${e.id}`),disableRowSelectionOnClick:!0})}),E&&a.jsx(x,{variant:"body2",color:"error",sx:{mt:2},children:"Failed to load employees."})]})]})};export{Q as default};
//# sourceMappingURL=EmployeeList-BoMNWGNs.js.map

import{j as t,B as m,e as h,G as k,K as v,O as s}from"./mui-DyWukRpy.js";import{u as R,c as r}from"./vendor-zvfEP8kw.js";import{u as z}from"./useQuery-FIUzu5rJ.js";import{t as l}from"./timesheetService-QrriUvCW.js";import{D as C}from"./DataGrid-CLJ1UgxA.js";import{k as N}from"./index-CjnpFxxd.js";import"./utils-IvyUKLVR.js";const B=()=>{const c=R(),d=r.useRef(null),[a,g]=r.useState({page:0,pageSize:10}),{data:u,isLoading:x,isError:f,refetch:p}=z({queryKey:["timesheets",a.page,a.pageSize],queryFn:async()=>l.getAll({page:a.page,size:a.pageSize}),placeholderData:N}),i=u,w=(i==null?void 0:i.content)??[],j=(i==null?void 0:i.totalElements)??0,S=r.useMemo(()=>[{field:"employeeName",headerName:"Employee",flex:1.2,minWidth:160},{field:"projectName",headerName:"Project",flex:1.2,minWidth:160},{field:"workDate",headerName:"Date",width:120},{field:"hoursWorked",headerName:"Hours",width:100},{field:"status",headerName:"Status",width:120}],[]),y=e=>{g({page:e.page,pageSize:e.pageSize})};return t.jsxs(m,{children:[t.jsx(h,{variant:"h4",component:"h1",gutterBottom:!0,children:"TimeSheets"}),t.jsxs(k,{sx:{p:2,mt:2},children:[t.jsxs(v,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:[t.jsx(s,{variant:"contained",onClick:()=>p(),children:"Refresh"}),t.jsx(s,{variant:"outlined",onClick:async()=>{const e=await l.exportExcel({page:a.page,size:a.pageSize}),n=window.URL.createObjectURL(e),o=document.createElement("a");o.href=n,o.download="timesheets.xlsx",o.click(),window.URL.revokeObjectURL(n)},children:"Export"}),t.jsx(s,{variant:"outlined",onClick:()=>{var e;return(e=d.current)==null?void 0:e.click()},children:"Import"}),t.jsx("input",{type:"file",accept:".xlsx,.xls",ref:d,style:{display:"none"},onChange:async e=>{var o;const n=(o=e.target.files)==null?void 0:o[0];n&&(await l.importExcel(n),e.currentTarget.value="",p())}}),t.jsx(m,{flexGrow:1}),t.jsx(s,{variant:"contained",onClick:()=>c("/timesheets/new"),children:"New"})]}),t.jsx("div",{style:{height:600,width:"100%"},children:t.jsx(C,{rows:w,columns:S,getRowId:e=>e.id,loading:x,paginationMode:"server",rowCount:j,pageSizeOptions:[5,10,25,50],paginationModel:{page:a.page,pageSize:a.pageSize},onPaginationModelChange:y,onRowClick:e=>c(`/timesheets/${e.id}`),disableRowSelectionOnClick:!0})}),f&&t.jsx(h,{variant:"body2",color:"error",sx:{mt:2},children:"Failed to load timesheets."})]})]})};export{B as default};
//# sourceMappingURL=TimeSheetList-CQZ7_ROJ.js.map

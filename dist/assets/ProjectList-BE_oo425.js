import{j as e,B as c,e as p,G as C,K as N,V as m,O as s}from"./mui-DyWukRpy.js";import{u as z,c as n}from"./vendor-zvfEP8kw.js";import{u as b}from"./useQuery-FIUzu5rJ.js";import{p as k}from"./projectService-4GD31wfU.js";import{D as M}from"./DataGrid-CLJ1UgxA.js";import{k as D}from"./index-CjnpFxxd.js";import"./utils-IvyUKLVR.js";const O=()=>{const d=z(),[r,h]=n.useState(""),[o,g]=n.useState(""),[t,u]=n.useState({page:0,pageSize:10}),{data:x,isLoading:j,isError:f,refetch:l}=b({queryKey:["projects",t.page,t.pageSize,r,o],queryFn:async()=>k.getAll({page:t.page,size:t.pageSize,search:r||void 0,companyId:o===""?void 0:Number(o)}),placeholderData:D}),i=x,S=(i==null?void 0:i.content)??[],v=(i==null?void 0:i.totalElements)??0,y=n.useMemo(()=>[{field:"code",headerName:"Code",width:140},{field:"name",headerName:"Name",flex:1.2,minWidth:180},{field:"companyName",headerName:"Company",flex:1,minWidth:160},{field:"projectManagerName",headerName:"Manager",flex:1,minWidth:160},{field:"status",headerName:"Status",width:140},{field:"startDate",headerName:"Start",width:120},{field:"deadline",headerName:"Deadline",width:120}],[]),w=a=>{u({page:a.page,pageSize:a.pageSize})};return e.jsxs(c,{children:[e.jsx(p,{variant:"h4",component:"h1",gutterBottom:!0,children:"Projects"}),e.jsxs(C,{sx:{p:2,mt:2},children:[e.jsxs(N,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:[e.jsx(m,{size:"small",label:"Search",value:r,onChange:a=>h(a.target.value)}),e.jsx(m,{size:"small",label:"Company ID",type:"number",value:o,onChange:a=>g(a.target.value===""?"":Number(a.target.value)),sx:{width:140}}),e.jsx(s,{variant:"contained",onClick:()=>l(),children:"Search"}),e.jsx(c,{flexGrow:1}),e.jsx(s,{variant:"outlined",onClick:()=>l(),children:"Refresh"}),e.jsx(s,{variant:"contained",onClick:()=>d("/projects/new"),children:"New"})]}),e.jsx("div",{style:{height:600,width:"100%"},children:e.jsx(M,{rows:S,columns:y,getRowId:a=>a.id,loading:j,paginationMode:"server",rowCount:v,pageSizeOptions:[5,10,25,50],paginationModel:{page:t.page,pageSize:t.pageSize},onPaginationModelChange:w,onRowClick:a=>d(`/projects/${a.id}`),disableRowSelectionOnClick:!0})}),f&&e.jsx(p,{variant:"body2",color:"error",sx:{mt:2},children:"Failed to load projects."})]})]})};export{O as default};
//# sourceMappingURL=ProjectList-BE_oo425.js.map

import{j as e,O as o,a8 as a,V as x}from"./mui-CYe98n_K.js";import{l as I,u as D,c as j}from"./vendor-XBP3t-ED.js";import{b as P}from"./index--2Lk4t6e.js";import{u as f}from"./useMutation-DaHtIydk.js";import{p as g}from"./projectService-B6tEN2uH.js";import{P as N}from"./PageContainer-BfQWlLPL.js";import{S as W}from"./SectionCard-4aLOeFJ3.js";import"./utils-BgeKWveL.js";const B=()=>{const{id:l}=I(),d=!!l,h=D(),{data:y}=P({queryKey:["project",l],queryFn:async()=>g.getById(Number(l)),enabled:d}),t=y||void 0,[n,u]=j.useState({name:"",description:"",startDate:"",endDate:"",deadline:"",status:"",budget:void 0,spentAmount:void 0,currency:"",completionPercentage:void 0,priority:"",clientName:"",clientContact:"",companyId:void 0,projectManagerId:void 0});j.useEffect(()=>{t&&u({name:t.name,description:t.description,startDate:t.startDate||"",endDate:t.endDate||"",deadline:t.deadline||"",status:t.status||"",budget:t.budget,spentAmount:t.spentAmount,currency:t.currency||"",completionPercentage:t.completionPercentage,priority:t.priority||"",clientName:t.clientName||"",clientContact:t.clientContact||"",companyId:t.companyId,projectManagerId:t.projectManagerId})},[t]);const{mutateAsync:b,isPending:v}=f({mutationFn:async()=>{const i=n;if(!i.name||!i.companyId)throw new Error("Name and Company ID are required");return d?g.update(Number(l),i):g.create(i)}}),r=i=>m=>{const c=m.target.value;u(p=>({...p,[i]:c===""?"":c}))},s=i=>m=>{const c=m.target.value;u(p=>({...p,[i]:c===""?void 0:Number(c)}))},C=async()=>{try{await b(),h("/projects")}catch(i){console.error(i)}};return e.jsx(N,{title:d?"Edit Project":"New Project",children:e.jsx(W,{children:e.jsxs(o,{spacing:2,children:[e.jsxs(o,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(a,{label:"Name",value:n.name||"",onChange:r("name"),fullWidth:!0,required:!0}),e.jsx(a,{label:"Company ID",type:"number",value:n.companyId??"",onChange:s("companyId"),sx:{minWidth:200},required:!0}),e.jsx(a,{label:"Manager ID",type:"number",value:n.projectManagerId??"",onChange:s("projectManagerId"),sx:{minWidth:200}})]}),e.jsx(a,{label:"Description",value:n.description||"",onChange:r("description"),multiline:!0,minRows:3}),e.jsxs(o,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(a,{label:"Start Date",type:"date",value:n.startDate||"",onChange:r("startDate"),InputLabelProps:{shrink:!0}}),e.jsx(a,{label:"End Date",type:"date",value:n.endDate||"",onChange:r("endDate"),InputLabelProps:{shrink:!0}}),e.jsx(a,{label:"Deadline",type:"date",value:n.deadline||"",onChange:r("deadline"),InputLabelProps:{shrink:!0}})]}),e.jsxs(o,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(a,{label:"Status",value:n.status||"",onChange:r("status"),sx:{minWidth:200}}),e.jsx(a,{label:"Budget",type:"number",value:n.budget??"",onChange:s("budget"),sx:{minWidth:200}}),e.jsx(a,{label:"Spent",type:"number",value:n.spentAmount??"",onChange:s("spentAmount"),sx:{minWidth:200}}),e.jsx(a,{label:"Currency",value:n.currency||"",onChange:r("currency"),sx:{minWidth:140}})]}),e.jsxs(o,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(a,{label:"Completion %",type:"number",value:n.completionPercentage??"",onChange:s("completionPercentage"),sx:{minWidth:200}}),e.jsx(a,{label:"Priority",value:n.priority||"",onChange:r("priority"),sx:{minWidth:200}}),e.jsx(a,{label:"Client",value:n.clientName||"",onChange:r("clientName"),sx:{minWidth:200}}),e.jsx(a,{label:"Contact",value:n.clientContact||"",onChange:r("clientContact"),sx:{minWidth:200}})]}),e.jsxs(o,{direction:"row",spacing:2,children:[e.jsx(x,{variant:"outlined",onClick:()=>h("/projects"),children:"Cancel"}),e.jsx(x,{variant:"contained",onClick:C,disabled:v,children:d?"Save":"Create"})]})]})})})};export{B as default};
//# sourceMappingURL=ProjectForm-Co03CyCA.js.map

import{j as a,O as j,V as r,g as R}from"./mui-CYe98n_K.js";import{c as s}from"./vendor-XBP3t-ED.js";import{b as N,k as v}from"./index--2Lk4t6e.js";import{e as d}from"./expenseService-YharjWb-.js";import{P as z}from"./PageContainer-BfQWlLPL.js";import{S as E}from"./SectionCard-4aLOeFJ3.js";import{N as C,s as b}from"./dataGridStyles-CXweFaFc.js";import{D as k}from"./DataGrid-BXsRbnco.js";import"./utils-BgeKWveL.js";const A=()=>{const[t,l]=s.useState({page:0,pageSize:10}),{data:c,isLoading:p,isError:m,refetch:g}=N({queryKey:["expenses","report",t.page,t.pageSize],queryFn:async()=>d.getAll({page:t.page,size:t.pageSize}),placeholderData:v}),o=c,x=(o==null?void 0:o.content)??[],h=(o==null?void 0:o.totalElements)??0,u=s.useMemo(()=>[{field:"employeeName",headerName:"Employee",flex:1,minWidth:160},{field:"expenseTypeName",headerName:"Type",flex:1,minWidth:140},{field:"projectName",headerName:"Project",flex:1.2,minWidth:180},{field:"expenseDate",headerName:"Date",width:120},{field:"amount",headerName:"Amount",width:120},{field:"currency",headerName:"Currency",width:100},{field:"status",headerName:"Status",width:140}],[]),f=e=>{l({page:e.page,pageSize:e.pageSize})},w=(e,S)=>{const n=window.URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download=S,i.click(),window.URL.revokeObjectURL(n)},y=async()=>{const e=await d.exportExcel({page:0,size:1e3});w(e,"expenses.xlsx")};return a.jsx(z,{title:"Expense Report",actions:a.jsx(r,{variant:"outlined",onClick:()=>g(),children:"Refresh"}),children:a.jsxs(E,{children:[a.jsx(j,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:a.jsx(r,{variant:"contained",onClick:y,children:"Export"})}),a.jsx("div",{style:{height:600,width:"100%"},children:a.jsx(k,{rows:x,columns:u,getRowId:e=>e.id,loading:p,paginationMode:"server",rowCount:h,pageSizeOptions:[5,10,25,50],paginationModel:{page:t.page,pageSize:t.pageSize},onPaginationModelChange:f,disableRowSelectionOnClick:!0,sx:b,slots:{noRowsOverlay:C}})}),m&&a.jsx(R,{variant:"body2",color:"error",sx:{mt:2},children:"Failed to load expenses."})]})})};export{A as default};
//# sourceMappingURL=ExpenseReport-Da_bx4EB.js.map
